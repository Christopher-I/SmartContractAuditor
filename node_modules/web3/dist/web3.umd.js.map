{"version":3,"file":"web3.umd.js","sources":["../src/index.js"],"sourcesContent":["/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file index.js\n * @authors: Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {AbstractWeb3Module} from 'web3-core';\nimport {formatters} from 'web3-core-helpers';\nimport {AbstractMethodModelFactory, MethodController} from 'web3-core-method';\nimport {ProvidersModuleFactory, providers} from 'web3-providers';\nimport * as Utils from 'web3-utils';\nimport {Eth} from 'web3-eth';\nimport {Shh} from 'web3-shh';\nimport {Bzz} from 'web3-bzz';\nimport {Network} from 'web3-net';\nimport {Personal} from 'web3-eth-personal';\nimport {version} from '../package.json';\n\nexport default class Web3 extends AbstractWeb3Module {\n    /**\n     * @param {Object|String} provider\n     * @param {Net} net\n     * @param {Object} options\n     *\n     * @constructor\n     */\n    constructor(provider, net, options) {\n        const providersModuleFactory = new ProvidersModuleFactory();\n        provider = providersModuleFactory.createProviderResolver().resolve(provider, net);\n\n        super(\n            provider,\n            providersModuleFactory,\n            providers,\n            new MethodController(),\n            new AbstractMethodModelFactory({}, Utils, formatters),\n            options\n        );\n\n        this.eth = new Eth(provider, options);\n        this.shh = new Shh(provider, options);\n        this.bzz = new Bzz(provider);\n    }\n\n    /**\n     * Sets the defaultAccount property on the eth module and also on the shh module\n     *\n     * @property defaultAccount\n     *\n     * @param {String} value\n     */\n    set defaultAccount(value) {\n        super.defaultAccount = value;\n        this.eth.defaultAccount = value;\n        this.shh.defaultAccount = value;\n    }\n\n    /**\n     * Sets the defaultBlock property on the eth module and also on the shh module\n     *\n     * @property defaultBlock\n     *\n     * @param {Number|String} value\n     */\n    set defaultBlock(value) {\n        super.defaultBlock = value;\n        this.eth.defaultBlock = value;\n        this.shh.defaultBlock = value;\n    }\n\n    /**\n     * Sets the defaultGasPrice property on the eth module and also on the shh module\n     *\n     * @property defaultGasPrice\n     *\n     * @param {String} value\n     */\n    set defaultGasPrice(value) {\n        super.defaultGasPrice = value;\n        this.eth.defaultGasPrice = value;\n        this.shh.defaultGasPrice = value;\n    }\n\n    /**\n     * Sets the defaultGas property on the eth module and also on the shh module\n     *\n     * @property defaultGas\n     *\n     * @param {Number} value\n     */\n    set defaultGas(value) {\n        super.defaultGas = value;\n        this.eth.defaultGas = value;\n        this.shh.defaultGas = value;\n    }\n\n    /**\n     * Sets the timeoutBlock property on the eth module and also on the shh module\n     *\n     * @property timeoutBlock\n     *\n     * @param {Number} value\n     */\n    set timeoutBlock(value) {\n        super.timeoutBlock = value;\n        this.eth.timeoutBlock = value;\n        this.shh.timeoutBlock = value;\n    }\n\n    /**\n     * Sets the confirmationBlock property on the eth module and also on the shh module\n     *\n     * @property confirmationBlock\n     *\n     * @param {Number} value\n     */\n    set confirmationBlock(value) {\n        super.confirmationBlock = value;\n        this.eth.confirmationBlock = value;\n        this.shh.confirmationBlock = value;\n    }\n\n    /**\n     * Sets the pollingTimeout property on the eth module and also on the shh module\n     *\n     * @property pollingTimeout\n     *\n     * @param {Number} value\n     */\n    set pollingTimeout(value) {\n        super.pollingTimeout = value;\n        this.eth.pollingTimeout = value;\n        this.shh.pollingTimeout = value;\n    }\n\n    /**\n     * Sets the provider for all packages\n     *\n     * @method setProvider\n     *\n     * @param {Object|String} provider\n     * @param {Net} net\n     *\n     * @returns {Boolean}\n     */\n    setProvider(provider, net) {\n        return (\n            super.setProvider(provider, net) &&\n            this.eth.setProvider(provider, net) &&\n            this.shh.setProvider(provider, net) &&\n            this.bzz.setProvider(provider)\n        );\n    }\n\n    /**\n     * Returns the detected provider\n     *\n     * @returns {Object}\n     */\n    static get givenProvider() {\n        return new ProvidersModuleFactory().createProviderDetector().detect();\n    }\n\n    /**\n     * Returns the web3 version\n     *\n     * @returns {String}\n     */\n    static get version() {\n        return version;\n    }\n\n    /**\n     * Returns the utils\n     *\n     * @returns {Utils}\n     */\n    static get utils() {\n        return Utils;\n    }\n\n    /**\n     * Returns an object with all public web3 modules\n     *\n     * @returns {Object}\n     */\n    static get modules() {\n        const ProviderResolver = new ProvidersModuleFactory().createProviderResolver();\n\n        return {\n            Eth: (provider, net) => {\n                return new Eth(ProviderResolver.resolve(provider, net));\n            },\n            Net: (provider, net) => {\n                return new Network(ProviderResolver.resolve(provider, net));\n            },\n            Personal: (provider, net) => {\n                return new Personal(ProviderResolver.resolve(provider, net));\n            },\n            Shh: (provider, net) => {\n                return new Shh(ProviderResolver.resolve(provider, net));\n            },\n            Bzz: (provider, net) => {\n                return new Bzz(ProviderResolver.resolve(provider, net));\n            }\n        };\n    }\n\n    /**\n     * Returns an object with all providers of web3\n     *\n     * @returns {Object}\n     */\n    static get providers() {\n        return providers;\n    }\n}\n"],"names":["Web3","AbstractWeb3Module","constructor","provider","net","options","providersModuleFactory","ProvidersModuleFactory","createProviderResolver","resolve","providers","MethodController","AbstractMethodModelFactory","Utils","formatters","eth","Eth","shh","Shh","bzz","Bzz","defaultAccount","value","defaultBlock","defaultGasPrice","defaultGas","timeoutBlock","confirmationBlock","pollingTimeout","setProvider","givenProvider","createProviderDetector","detect","version","utils","modules","ProviderResolver","Net","Network","Personal"],"mappings":"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"}
