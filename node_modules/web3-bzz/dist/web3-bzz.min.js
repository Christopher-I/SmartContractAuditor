(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.Web3Bzz={})})(this,function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a){var b=typeof a;return"function"==b||"object"==b&&!!a}function f(a){return"[object String]"===h.call(a)}const g=Object.prototype,h=g.toString;var i=require("fs-extra"),j=require("./files.js"),k=require("os"),l=require("path"),m=require("child_process"),n=require("mime-types"),o=require("./../archives/archives.json"),p=require("xhr-request-promise"),q=require("eth-lib/lib/bytes"),r=require("./swarm-hash.js"),s=require("./pick.js"),t=require("./swarm");module.exports=t({fs:i,files:j,os:k,path:l,child_process:m,defaultArchives:o,mimetype:n,request:function(a,b){var c={};for(var d in b)c[d]=b[d];return"undefined"!=typeof c.body&&(c.body=c.body instanceof Buffer?c.body:new Buffer(c.body)),p(a,c)},downloadUrl:"http://ethereum-mist.s3.amazonaws.com/swarm/",bytes:q,hash:r,pick:s});var u=function(){function a(c){b(this,a),this.givenProvider=a.givenProvider,this.currentProvider=null,this.setProvider(c)}return d(a,[{key:"pick",value:function(){if("undefined"!=typeof document)return this.swarm.pick;throw new Error("Pick is not supported for this environment.")}},{key:"download",value:function(a,b){return this.hasProvider()?this.swarm.download(a,b):void this.throwProviderError()}},{key:"upload",value:function(a){return this.hasProvider()?this.swarm.upload(a):void this.throwProviderError()}},{key:"isAvailable",value:function(){return this.hasProvider()?this.swarm.isAvailable():void this.throwProviderError()}},{key:"hasProvider",value:function(){return!!this.currentProvider}},{key:"throwProviderError",value:function(){throw new Error("No provider set, please set one using bzz.setProvider().")}},{key:"setProvider",value:function(a){return(e(a)&&f(a.bzz)&&(a=a.bzz),f(a))?(this.currentProvider=a,this.swarm=(void 0)(a),!0):(this.currentProvider=null,!1)}}]),a}();u.givenProvider=null,"undefined"!=typeof ethereumProvider&&ethereumProvider.bzz&&(u.givenProvider=ethereumProvider.bzz),a.Bzz=u,Object.defineProperty(a,"__esModule",{value:!0})});
