{"version":3,"file":"web3-bzz.umd.js","sources":["../node_modules/underscore-es/isObject.js","../node_modules/underscore-es/_quickaccess.js","../node_modules/underscore-es/isString.js","../src/Bzz.js","../src/index.js"],"sourcesContent":["// `_isObject` : an object's function\n// -----------------------------------\n\n// Is a given variable an object?\nexport default function (obj) {\n\tvar type = typeof obj;\n\treturn type === 'function' || type === 'object' && !!obj;\n}","// quick reference variables for speed access\n//-------------------------------------------\n\n// Save bytes in the minified (but not gzipped) version:\nexport const ArrayProto = Array.prototype;\nexport const ObjProto = Object.prototype;\nexport const SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport const push = ArrayProto.push;\nexport const slice = ArrayProto.slice;\nexport const toString = ObjProto.toString;\nexport const hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nexport const nativeIsArray = Array.isArray;\nexport const nativeKeys = Object.keys;\nexport const nativeCreate = Object.create;\n\n// Naked function reference for surrogate-prototype-swapping.\nexport const Ctor = function () {};","// `_isString` : an object's function\n// -----------------------------------\n\nimport {toString} from './_quickaccess';\n\n// Is a given value a string?\nexport default function (obj) {\n\treturn toString.call(obj) === '[object String]';\n}","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file Bzz.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\nimport isObject from 'underscore-es/isObject';\nimport isString from 'underscore-es/isString';\nimport * as swarm from 'swarm-js';\n\nexport default class Bzz {\n    /**\n     * @param {Object|String} provider\n     *\n     * @constructor\n     */\n    constructor(provider) {\n        this.givenProvider = Bzz.givenProvider;\n        this.currentProvider = null;\n        this.setProvider(provider);\n    }\n\n    /**\n     * Gets the pick methods from swarm if it is executed in the browser\n     *\n     * @method pick\n     *\n     * @returns {Object|Boolean}\n     */\n    pick() {\n        if (typeof document !== 'undefined') {\n            return this.swarm.pick;\n        }\n\n        throw new Error('Pick is not supported for this environment.');\n    }\n\n    /**\n     * Downloads a file from the swarm network\n     *\n     * @method download\n     *\n     * @param {String} bzzHash\n     * @param {String} localPath\n     *\n     * @returns {Promise<Buffer|Object|String>}\n     */\n    download(bzzHash, localPath) {\n        if (this.hasProvider()) {\n            return this.swarm.download(bzzHash, localPath);\n        }\n\n        this.throwProviderError();\n    }\n\n    /**\n     * Uploads the given data to swarm\n     *\n     * @method upload\n     *\n     * @param {String|Buffer|Uint8Array|Object} data\n     *\n     * @returns {Promise<String>}\n     */\n    upload(data) {\n        if (this.hasProvider()) {\n            return this.swarm.upload(data);\n        }\n\n        this.throwProviderError();\n    }\n\n    /**\n     * Checks if swarm is available\n     *\n     * @method isAvailable\n     *\n     * @returns {Promise<boolean>}\n     */\n    isAvailable() {\n        if (this.hasProvider()) {\n            return this.swarm.isAvailable();\n        }\n\n        this.throwProviderError();\n    }\n\n    /**\n     * Checks if currentProvider is set\n     *\n     * @method hasProvider\n     *\n     * @returns {Boolean}\n     */\n    hasProvider() {\n        return !!this.currentProvider;\n    }\n\n    /**\n     * Throws the provider error\n     *\n     * @method throwProviderError\n     */\n    throwProviderError() {\n        throw new Error('No provider set, please set one using bzz.setProvider().');\n    }\n\n    /**\n     * Sets the provider for swarm\n     *\n     * @method setProvider\n     *\n     * @param {Object|String} provider\n     *\n     * @returns {Boolean}\n     */\n    setProvider(provider) {\n        // is ethereum provider\n        if (isObject(provider) && isString(provider.bzz)) {\n            provider = provider.bzz;\n        }\n\n        if (isString(provider)) {\n            this.currentProvider = provider;\n            this.swarm = swarm.at(provider);\n\n            return true;\n        }\n\n        this.currentProvider = null;\n\n        return false;\n    }\n}\n\nBzz.givenProvider = null;\n/* eslint-disable no-undef */\nif (typeof ethereumProvider !== 'undefined' && ethereumProvider.bzz) {\n    Bzz.givenProvider = ethereumProvider.bzz;\n}\n/* eslint-enable no-undef */\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file index.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport Bzz from './Bzz';\n"],"names":["Bzz","constructor","provider","givenProvider","currentProvider","setProvider","pick","document","swarm","Error","download","bzzHash","localPath","hasProvider","throwProviderError","upload","data","isAvailable","isObject","isString","bzz","ethereumProvider"],"mappings":";;;;;;CAAA;CACA;;CAEA;AACA,CAAe,iBAAQ,EAAE,GAAG,EAAE;CAC9B,CAAC,IAAI,IAAI,GAAG,OAAO,GAAG,CAAC;CACvB,CAAC,OAAO,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC;CAC1D;;CCPA;AACA,CAIO,MAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC;AACzC,CAKO,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;;CCX1C;AACA,AAGA;CACA;AACA,CAAe,iBAAQ,EAAE,GAAG,EAAE;CAC9B,CAAC,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,iBAAiB,CAAC;CACjD;;CCRA;;;;;;;;;;;;;;;;CA0Be,MAAMA,GAAN,CAAU;CACrB;;;;;CAKAC,EAAAA,WAAW,CAACC,QAAD,EAAW;CAClB,SAAKC,aAAL,GAAqBH,GAAG,CAACG,aAAzB;CACA,SAAKC,eAAL,GAAuB,IAAvB;CACA,SAAKC,WAAL,CAAiBH,QAAjB;CACH;CAED;;;;;;;;;CAOAI,EAAAA,IAAI,GAAG;CACH,QAAI,OAAOC,QAAP,KAAoB,WAAxB,EAAqC;CACjC,aAAO,KAAKC,KAAL,CAAWF,IAAlB;CACH;;CAED,UAAM,IAAIG,KAAJ,CAAU,6CAAV,CAAN;CACH;CAED;;;;;;;;;;;;CAUAC,EAAAA,QAAQ,CAACC,OAAD,EAAUC,SAAV,EAAqB;CACzB,QAAI,KAAKC,WAAL,EAAJ,EAAwB;CACpB,aAAO,KAAKL,KAAL,CAAWE,QAAX,CAAoBC,OAApB,EAA6BC,SAA7B,CAAP;CACH;;CAED,SAAKE,kBAAL;CACH;CAED;;;;;;;;;;;CASAC,EAAAA,MAAM,CAACC,IAAD,EAAO;CACT,QAAI,KAAKH,WAAL,EAAJ,EAAwB;CACpB,aAAO,KAAKL,KAAL,CAAWO,MAAX,CAAkBC,IAAlB,CAAP;CACH;;CAED,SAAKF,kBAAL;CACH;CAED;;;;;;;;;CAOAG,EAAAA,WAAW,GAAG;CACV,QAAI,KAAKJ,WAAL,EAAJ,EAAwB;CACpB,aAAO,KAAKL,KAAL,CAAWS,WAAX,EAAP;CACH;;CAED,SAAKH,kBAAL;CACH;CAED;;;;;;;;;CAOAD,EAAAA,WAAW,GAAG;CACV,WAAO,CAAC,CAAC,KAAKT,eAAd;CACH;CAED;;;;;;;CAKAU,EAAAA,kBAAkB,GAAG;CACjB,UAAM,IAAIL,KAAJ,CAAU,0DAAV,CAAN;CACH;CAED;;;;;;;;;;;CASAJ,EAAAA,WAAW,CAACH,QAAD,EAAW;CAClB;CACA,QAAIgB,QAAQ,CAAChB,QAAD,CAAR,IAAsBiB,QAAQ,CAACjB,QAAQ,CAACkB,GAAV,CAAlC,EAAkD;CAC9ClB,MAAAA,QAAQ,GAAGA,QAAQ,CAACkB,GAApB;CACH;;CAED,QAAID,QAAQ,CAACjB,QAAD,CAAZ,EAAwB;CACpB,WAAKE,eAAL,GAAuBF,QAAvB;CACA,WAAKM,KAAL,GAAaA,QAAA,CAASN,QAAT,CAAb;CAEA,aAAO,IAAP;CACH;;CAED,SAAKE,eAAL,GAAuB,IAAvB;CAEA,WAAO,KAAP;CACH;;CA1HoB;CA6HzBJ,GAAG,CAACG,aAAJ,GAAoB,IAApB;CACA;;CACA,IAAI,OAAOkB,gBAAP,KAA4B,WAA5B,IAA2CA,gBAAgB,CAACD,GAAhE,EAAqE;CACjEpB,EAAAA,GAAG,CAACG,aAAJ,GAAoBkB,gBAAgB,CAACD,GAArC;CACH;CACD;;CC5JA;;;;;;;;;;;;;;;;;;;;;;;;;;;"}