{"version":3,"file":"web3-core.umd.js","sources":["../node_modules/underscore-es/_quickaccess.js","../node_modules/underscore-es/isArray.js","../node_modules/underscore-es/isObject.js","../src/AbstractWeb3Module.js","../src/index.js"],"sourcesContent":["// quick reference variables for speed access\n//-------------------------------------------\n\n// Save bytes in the minified (but not gzipped) version:\nexport const ArrayProto = Array.prototype;\nexport const ObjProto = Object.prototype;\nexport const SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport const push = ArrayProto.push;\nexport const slice = ArrayProto.slice;\nexport const toString = ObjProto.toString;\nexport const hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nexport const nativeIsArray = Array.isArray;\nexport const nativeKeys = Object.keys;\nexport const nativeCreate = Object.create;\n\n// Naked function reference for surrogate-prototype-swapping.\nexport const Ctor = function () {};","// `_isArray` : an object's function\n// ----------------------------------\n\nimport {nativeIsArray, toString} from './_quickaccess';\n\n// Is a given value an array?\n// Delegates to ECMA5's native Array.isArray\nexport var _isArray = nativeIsArray || function (obj) {\n\treturn toString.call(obj) === '[object Array]';\n}\n\nexport {_isArray as default};","// `_isObject` : an object's function\n// -----------------------------------\n\n// Is a given variable an object?\nexport default function (obj) {\n\tvar type = typeof obj;\n\treturn type === 'function' || type === 'object' && !!obj;\n}","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file AbstractWeb3Module.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\nimport isObject from 'underscore-es/isObject';\nimport {AbstractMethodModel} from 'web3-core-method';\n\nexport default class AbstractWeb3Module {\n    /**\n     * @param {AbstractProviderAdapter|EthereumProvider} provider\n     * @param {ProvidersModuleFactory} providersModuleFactory\n     * @param {Object} providers\n     * @param {MethodController} methodController\n     * @param {AbstractMethodModelFactory} methodModelFactory\n     * @param {Object} options\n     *\n     * @constructor\n     */\n    constructor(\n        provider = this.throwIfMissing('provider'),\n        providersModuleFactory = this.throwIfMissing('providersModuleFactory'),\n        providers = this.throwIfMissing('providers'),\n        methodController = this.throwIfMissing('methodController'),\n        methodModelFactory = null,\n        options = {}\n    ) {\n        this._currentProvider = provider;\n        this.providersModuleFactory = providersModuleFactory;\n        this.providers = providers;\n        this.methodController = methodController;\n        this.providerDetector = providersModuleFactory.createProviderDetector();\n        this.ProviderResolver = providersModuleFactory.createProviderResolver();\n        this._defaultAccount = options.defaultAccount || null;\n        this._defaultBlock = options.defaultBlock || null;\n        this._transactionBlockTimeout = options.transactionPollingTimeout || 50;\n        this._transactionConfirmationBlocks = options.transactionConfirmationBlocks || 24;\n        this._transactionPollingTimeout = options.transactionPollingTimeout || 15;\n        this._defaultGasPrice = options.defaultGasPrice || null;\n        this._defaultGas = options.defaultGas || null;\n        this.extendedPackages = [];\n        this.givenProvider = this.providerDetector.detect();\n        this.BatchRequest = () => {\n            return this.providersModuleFactory.createBatchRequest(this.currentProvider);\n        };\n\n        if (methodModelFactory !== null || typeof methodModelFactory !== 'undefined') {\n            this.methodModelFactory = methodModelFactory;\n            this.extend.formatters = this.methodModelFactory.formatters;\n\n            return new Proxy(this, {\n                get: this.proxyHandler\n            });\n        }\n    }\n\n    /**\n     * Getter for the defaultGasPrice property\n     *\n     * @property defaultGasPrice\n     *\n     * @returns {String}\n     */\n    get defaultGasPrice() {\n        return this._defaultGasPrice;\n    }\n\n    /**\n     * Sets the defaultGasPrice property on the current object and his extended objects\n     *\n     * @property defaultGasPrice\n     *\n     * @param {String} value\n     */\n    set defaultGasPrice(value) {\n        this._defaultGasPrice = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage.defaultGasPrice = value;\n            });\n        }\n    }\n\n    /**\n     * Sets the defaultGas property on the current object and his extended objects\n     *\n     * @property defaultGas\n     *\n     * @param {Number} value\n     */\n    set defaultGas(value) {\n        this._defaultGas = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage.defaultGas = value;\n            });\n        }\n    }\n\n    /**\n     * Getter for the defaultGas property\n     *\n     * @property defaultGas\n     *\n     * @returns {Number}\n     */\n    get defaultGas() {\n        return this._defaultGas;\n    }\n\n    /**\n     * Getter for the pollingTimeout property\n     *\n     * @property transactionPollingTimeout\n     *\n     * @returns {Number}\n     */\n    get transactionPollingTimeout() {\n        return this._transactionPollingTimeout;\n    }\n\n    /**\n     * Sets the pollingTimeout for the current object and his extended objects\n     *\n     * @property transactionPollingTimeout\n     *\n     * @param {Number} value\n     */\n    set transactionPollingTimeout(value) {\n        this._transactionPollingTimeout = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage._transactionPollingTimeout = value;\n            });\n        }\n    }\n\n    /**\n     * Getter for the confirmationBlock property\n     *\n     * @property transactionConfirmationBlocks\n     *\n     * @returns {Number}\n     */\n    get transactionConfirmationBlocks() {\n        return this._transactionConfirmationBlocks;\n    }\n\n    /**\n     * Sets the confirmationBlock on the current object and his extended objects\n     *\n     * @property transactionConfirmationBlocks\n     *\n     * @param {Number} value\n     */\n    set transactionConfirmationBlocks(value) {\n        this._transactionConfirmationBlocks = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage._transactionConfirmationBlocks = value;\n            });\n        }\n    }\n\n    /**\n     * Getter for the timeoutBlock property\n     *\n     * @property transactionBlockTimeout\n     *\n     * @returns {Number}\n     */\n    get transactionBlockTimeout() {\n        return this._transactionBlockTimeout;\n    }\n\n    /**\n     * Sets the timeoutBlock property on the current object and his extended objects\n     *\n     * @property transactionBlockTimeout\n     *\n     * @param {Number} value\n     */\n    set transactionBlockTimeout(value) {\n        this._transactionBlockTimeout = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage._transactionBlockTimeout = value;\n            });\n        }\n    }\n\n    /**\n     * Getter for the defaultBlock property\n     *\n     * @returns {String|Number}\n     */\n    get defaultBlock() {\n        return this._defaultBlock;\n    }\n\n    /**\n     * Sets the defaultBlock on the current object and his extended objects\n     *\n     * @property defaultBlock\n     *\n     * @param {String|Number} value\n     */\n    set defaultBlock(value) {\n        this._defaultBlock = value;\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage.defaultBlock = value;\n            });\n        }\n    }\n\n    /**\n     * Getter for the defaultAccount property\n     *\n     * @property defaultAccount\n     *\n     * @returns {null|String}\n     */\n    get defaultAccount() {\n        return this._defaultAccount;\n    }\n\n    /**\n     * Sets the defaultAccount of the current object and extended objects\n     *\n     * @property defaultAccount\n     *\n     * @param {String} value\n     */\n    set defaultAccount(value) {\n        this._defaultAccount = this.utils.toChecksumAddress(this.formatters.inputAddressFormatter(value));\n        if (this.extendedPackages.length > 0) {\n            this.extendedPackages.forEach((extendedPackage) => {\n                extendedPackage.defaultAccount = value;\n            });\n        }\n    }\n\n    /**\n     * Returns the currentProvider\n     *\n     * @property currentProvider\n     *\n     * @returns {AbstractProviderAdapter|EthereumProvider}\n     */\n    get currentProvider() {\n        return this._currentProvider;\n    }\n\n    /**\n     * Throws an error because currentProvider is read-only\n     *\n     * @property currentProvider\n     */\n    set currentProvider(value) {\n        throw new Error('The property currentProvider is read-only!');\n    }\n\n    /**\n     * Sets the currentProvider and provider property\n     *\n     * @method setProvider\n     *\n     * @param {Object|String} provider\n     * @param {Net} net\n     *\n     * @returns {Boolean}\n     */\n    setProvider(provider, net) {\n        if (!this.isSameProvider(provider)) {\n            this.clearSubscriptions();\n            this._currentProvider = this.ProviderResolver.resolve(provider, net);\n\n            var setExtendedPackagesProvider = true;\n            if (this.extendedPackages.length > 0) {\n                setExtendedPackagesProvider = this.extendedPackages.every((extendedPackage) => {\n                    return extendedPackage.setProvider(provider, net);\n                });\n            }\n\n            return !!(setExtendedPackagesProvider && this._currentProvider);\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks if the given provider is the same as the currentProvider\n     *\n     * @method isSameProvider\n     *\n     * @param {Object|String} provider\n     *\n     * @returns {Boolean}\n     */\n    isSameProvider(provider) {\n        if (isObject(provider)) {\n            if (this.currentProvider.provider.constructor.name === provider.constructor.name) {\n                return this.currentProvider.host === provider.host;\n            }\n\n            return false;\n        }\n\n        return this.currentProvider.host === provider;\n    }\n\n    /**\n     * Clears all subscriptions and listeners of the provider if it has any subscriptions\n     *\n     * @method clearSubscriptions\n     */\n    clearSubscriptions() {\n        if (\n            typeof this.currentProvider.clearSubscriptions !== 'undefined' &&\n            this.currentProvider.subscriptions.length > 0\n        ) {\n            this.currentProvider.clearSubscriptions();\n        }\n    }\n\n    /**\n     * Extends the current object with JSON-RPC methods\n     *\n     * @method extend\n     *\n     * @param {Object} extension\n     */\n    extend(extension) {\n        const namespace = extension.property || false;\n        let object;\n\n        if (namespace) {\n            let methodModelFactory = null;\n\n            if (this.methodModelFactory !== null) {\n                methodModelFactory = new this.methodModelFactory.constructor(\n                    {},\n                    this.methodModelFactory.utils,\n                    this.methodModelFactory.formatters\n                );\n            }\n\n            object = this[namespace] = new this.constructor(\n                this.currentProvider,\n                this.providersModuleFactory,\n                this.providers,\n                this.methodController,\n                methodModelFactory,\n                this.defaultAccount,\n                this.defaultBlock,\n                this.timeoutBlock,\n                this.confirmationBlock,\n                this.pollingTimeout\n            );\n\n            this.extendedPackages.push(object);\n        } else {\n            object = this;\n        }\n\n        if (extension.methods) {\n            extension.methods.forEach((method) => {\n                class ExtensionMethodModel extends AbstractMethodModel {\n                    constructor(utils, formatters) {\n                        super(method.call, method.params, utils, formatters);\n                    }\n\n                    beforeExecution(parameters, moduleInstance) {\n                        method.inputFormatters.forEach((formatter, key) => {\n                            if (formatter) {\n                                parameters[key] = formatter(parameters[key], moduleInstance);\n                            }\n                        });\n                    }\n\n                    afterExecution(response) {\n                        if (isArray(response)) {\n                            response = response.map((responseItem) => {\n                                if (method.outputFormatter && responseItem) {\n                                    return method.outputFormatter(responseItem);\n                                }\n\n                                return responseItem;\n                            });\n\n                            return response;\n                        }\n\n                        if (method.outputFormatter && response) {\n                            response = method.outputFormatter(response);\n                        }\n\n                        return response;\n                    }\n                }\n\n                object.methodModelFactory.methodModels[method.name] = ExtensionMethodModel;\n            });\n        }\n    }\n\n    /**\n     * Handles method execution\n     *\n     * @method proxyHandler\n     *\n     * @param {Object} target\n     * @param {String} name\n     *\n     * @returns {*}\n     */\n    proxyHandler(target, name) {\n        if (target.methodModelFactory.hasMethodModel(name)) {\n            if (typeof target[name] !== 'undefined') {\n                throw new TypeError(\n                    `Duplicated method ${name}. This method is defined as RPC call and as Object method.`\n                );\n            }\n\n            const methodModel = target.methodModelFactory.createMethodModel(name);\n\n            const anonymousFunction = () => {\n                methodModel.methodArguments = arguments;\n\n                if (methodModel.parameters.length !== methodModel.parametersAmount) {\n                    throw new Error(\n                        `Invalid parameters length the expected length would be \n                        ${methodModel.parametersAmount}\n                         and not \n                        ${methodModel.parameters.length}`\n                    );\n                }\n\n                return target.methodController.execute(methodModel, target.accounts, target);\n            };\n\n            anonymousFunction.methodModel = methodModel;\n            anonymousFunction.request = methodModel.request;\n\n            return anonymousFunction;\n        }\n\n        return target[name];\n    }\n\n    /**\n     * Throws an error if the parameter is missing\n     *\n     * @param {String} name\n     */\n    throwIfMissing(name) {\n        throw new Error(`Missing parameter: ${name}`);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file index.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport AbstractWeb3Module from './AbstractWeb3Module';\n"],"names":["AbstractWeb3Module","constructor","provider","throwIfMissing","providersModuleFactory","providers","methodController","methodModelFactory","options","_currentProvider","providerDetector","createProviderDetector","ProviderResolver","createProviderResolver","_defaultAccount","defaultAccount","_defaultBlock","defaultBlock","_transactionBlockTimeout","transactionPollingTimeout","_transactionConfirmationBlocks","transactionConfirmationBlocks","_transactionPollingTimeout","_defaultGasPrice","defaultGasPrice","_defaultGas","defaultGas","extendedPackages","givenProvider","detect","BatchRequest","createBatchRequest","currentProvider","extend","formatters","Proxy","get","proxyHandler","value","length","forEach","extendedPackage","transactionBlockTimeout","utils","toChecksumAddress","inputAddressFormatter","Error","setProvider","net","isSameProvider","clearSubscriptions","resolve","setExtendedPackagesProvider","every","isObject","name","host","subscriptions","extension","namespace","property","object","timeoutBlock","confirmationBlock","pollingTimeout","push","methods","method","ExtensionMethodModel","AbstractMethodModel","call","params","beforeExecution","parameters","moduleInstance","inputFormatters","formatter","key","afterExecution","response","isArray","map","responseItem","outputFormatter","methodModels","target","hasMethodModel","TypeError","methodModel","createMethodModel","anonymousFunction","methodArguments","arguments","parametersAmount","execute","accounts","request"],"mappings":"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"}
