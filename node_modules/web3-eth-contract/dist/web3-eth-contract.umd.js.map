{"version":3,"file":"web3-eth-contract.umd.js","sources":["../src/models/abi/AbiModel.js","../node_modules/underscore-es/_quickaccess.js","../node_modules/underscore-es/isArray.js","../src/models/abi/AbiItemModel.js","../src/encoders/MethodEncoder.js","../src/encoders/EventFilterEncoder.js","../src/encoders/AllEventsFilterEncoder.js","../src/decoders/CallMethodResponseDecoder.js","../src/decoders/EventLogDecoder.js","../src/decoders/AllEventsLogDecoder.js","../src/mappers/AbiMapper.js","../src/mappers/RpcMethodOptionsMapper.js","../src/mappers/EventOptionsMapper.js","../src/mappers/AllEventsOptionsMapper.js","../node_modules/underscore-es/isFunction.js","../src/proxies/MethodsProxy.js","../node_modules/underscore-es/isUndefined.js","../src/proxies/EventSubscriptionsProxy.js","../src/validators/RpcMethodOptionsValidator.js","../src/models/methods/CallContractMethodModel.js","../src/models/methods/ContractDeployMethodModel.js","../src/models/methods/PastEventLogsMethodModel.js","../src/models/methods/SendContractMethodModel.js","../src/factories/RpcMethodModelFactory.js","../src/models/subscriptions/EventLogSubscription.js","../src/models/subscriptions/AllEventsLogSubscription.js","../src/factories/EventSubscriptionFactory.js","../src/AbstractContract.js","../src/factories/ContractModuleFactory.js","../src/index.js"],"sourcesContent":["/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file AbiModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class AbiModel {\n    /**\n     * @param {Object} mappedAbi\n     *\n     * @constructor\n     */\n    constructor(mappedAbi) {\n        this.abi = mappedAbi;\n    }\n\n    /**\n     * Checks if the method exists and returns it otherwise it will return false\n     *\n     * @method getMethod\n     *\n     * @param {String} name\n     *\n     * @returns {AbiItemModel|Boolean}\n     */\n    getMethod(name) {\n        if (this.hasMethod(name)) {\n            return this.abi.methods[name];\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks if the event exists and returns it otherwise it will return false\n     *\n     * @method getEvent\n     *\n     * @param {String} name\n     *\n     * @returns {AbiItemModel|Boolean}\n     */\n    getEvent(name) {\n        if (this.hasEvent(name)) {\n            return this.abi.events[name];\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns all events from this AbiModel\n     *\n     * @method getEvents\n     *\n     * @returns {Object}\n     */\n    getEvents() {\n        return this.abi.events;\n    }\n\n    /**\n     * Returns an event by his signature\n     *\n     * @method getEventBySignature\n     *\n     * @param {String} signature\n     *\n     * @returns {AbiItemModel}\n     */\n    getEventBySignature(signature) {\n        return this.abi.events.find((event) => {\n            return event.signature === signature;\n        });\n    }\n\n    /**\n     * Checks if the method exists\n     *\n     * @method hasMethod\n     *\n     * @param {String} name\n     *\n     * @returns {Boolean}\n     */\n    hasMethod(name) {\n        return typeof this.abi.methods[name] !== 'undefined';\n    }\n\n    /**\n     * Checks if the event exists\n     *\n     * @method hasEvent\n     *\n     * @param {String} name\n     *\n     * @returns {Boolean}\n     */\n    hasEvent(name) {\n        return typeof this.abi.events[name] !== 'undefined';\n    }\n}\n","// quick reference variables for speed access\n//-------------------------------------------\n\n// Save bytes in the minified (but not gzipped) version:\nexport const ArrayProto = Array.prototype;\nexport const ObjProto = Object.prototype;\nexport const SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport const push = ArrayProto.push;\nexport const slice = ArrayProto.slice;\nexport const toString = ObjProto.toString;\nexport const hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nexport const nativeIsArray = Array.isArray;\nexport const nativeKeys = Object.keys;\nexport const nativeCreate = Object.create;\n\n// Naked function reference for surrogate-prototype-swapping.\nexport const Ctor = function () {};","// `_isArray` : an object's function\n// ----------------------------------\n\nimport {nativeIsArray, toString} from './_quickaccess';\n\n// Is a given value an array?\n// Delegates to ECMA5's native Array.isArray\nexport var _isArray = nativeIsArray || function (obj) {\n\treturn toString.call(obj) === '[object Array]';\n}\n\nexport {_isArray as default};","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file AbiItemModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\n\nexport default class AbiItemModel {\n    /**\n     * @param {Object} abiItem\n     *\n     * @constructor\n     */\n    constructor(abiItem) {\n        this.abiItem = abiItem;\n        this.signature = this.abiItem.signature;\n        this.name = this.abiItem.name;\n        this.anonymous = this.abiItem.anonymous;\n        this.contractMethodParameters = [];\n\n        Object.defineProperty(this, 'requestType', {\n            get() {\n                if (abiItem.type === 'function') {\n                    if (abiItem.constant === true) {\n                        return 'call';\n                    }\n\n                    return 'send';\n                }\n            }\n        });\n    }\n\n    /**\n     * Returns the input length of the abiItem\n     *\n     * @method getInputLength\n     *\n     * @returns {Number}\n     */\n    getInputLength() {\n        if (isArray(this.abiItem.inputs)) {\n            return this.abiItem.inputs.length;\n        }\n\n        return 0;\n    }\n\n    /**\n     * Returns all inputs of the abi item\n     *\n     * @method getInputs\n     *\n     * @returns {Array}\n     */\n    getInputs() {\n        let inputs = [];\n\n        if (isArray(this.abiItem.inputs)) {\n            inputs = this.abiItem.inputs;\n        }\n\n        return inputs;\n    }\n\n    /**\n     * Checks if the given parameter array length matches the abiItem inputs length\n     *\n     * @method givenParametersLengthIsValid\n     *\n     * @returns {Error|Boolean}\n     */\n    givenParametersLengthIsValid() {\n        const inputLength = this.getInputLength();\n\n        if (this.contractMethodParameters.length === inputLength) {\n            return true;\n        }\n\n        throw new Error(\n            `The number of arguments is not matching the methods required number. You need to pass ${inputLength} arguments.`\n        );\n    }\n\n    /**\n     * Returns the indexed input of this abiItem\n     *\n     * @returns {Array}\n     */\n    getIndexedInputs() {\n        return this.getInputs().filter((input) => {\n            return input.indexed === true;\n        });\n    }\n\n    /**\n     * Checks the type of this abiItem\n     *\n     * @method isOfType\n     *\n     * @returns {Boolean}\n     */\n    isOfType(type) {\n        return this.abiItem.type === type;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file MethodEncoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class MethodEncoder {\n    /**\n     * @param {AbiCoder} abiCoder\n     *\n     * @constructor\n     */\n    constructor(abiCoder) {\n        this.abiCoder = abiCoder;\n    }\n\n    /**\n     * Encodes the method with the given parameters\n     *\n     * @method encode\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {String} deployData\n     *\n     * @returns {String|Error}\n     */\n    encode(abiItemModel, deployData) {\n        let encodedParameters = this.abiCoder\n            .encodeParameters(abiItemModel.getInputs(), abiItemModel.contractMethodParameters)\n            .replace('0x', '');\n\n        if (abiItemModel.signature === 'constructor') {\n            if (!deployData) {\n                throw new Error(\n                    'The contract has no contract data option set. This is necessary to append the constructor parameters.'\n                );\n            }\n\n            return deployData + encodedParameters;\n        }\n\n        if (abiItemModel.isOfType('function')) {\n            return abiItemModel.signature + encodedParameters;\n        }\n\n        return encodedParameters;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file EventFilterEncoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\n\nexport default class EventFilterEncoder {\n    /**\n     * @param {AbiCoder} abiCoder\n     *\n     * @constructor\n     */\n    constructor(abiCoder) {\n        this.abiCoder = abiCoder;\n    }\n\n    /**\n     * Creates encoded topics from filter option of an event.\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {*} filter\n     *\n     * @returns {Array}\n     */\n    encode(abiItemModel, filter) {\n        const indexedInputs = abiItemModel.getIndexedInputs();\n        let topics = [];\n\n        indexedInputs.forEach((indexedInput) => {\n            if (typeof filter[indexedInput.name] !== 'undefined') {\n                const filterItem = filter[indexedInput.name];\n\n                if (isArray(filterItem)) {\n                    filterItem.map((item) => {\n                        return this.abiCoder.encodeParameter(indexedInput.type, item);\n                    });\n\n                    topics.push(filterItem);\n\n                    return;\n                }\n\n                topics.push(this.abiCoder.encodeParameter(indexedInput.type, filterItem));\n            }\n        });\n\n        return topics;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file AllEventsFilterEncoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport EventFilterEncoder from './EventFilterEncoder';\n\nexport default class AllEventsFilterEncoder extends EventFilterEncoder {\n    /**\n     * Creates encoded topics from filter option of an event.\n     *\n     * @param {AbiModel} abiModel\n     * @param {*} filter\n     *\n     * @returns {Array}\n     */\n    encode(abiModel, filter) {\n        const events = abiModel.getEvents();\n        let topics = [];\n\n        Object.keys(events).forEach((key) => {\n            topics.push(super.encode(events[key], filter));\n        });\n\n        return topics;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file CallMethodResponseDecoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class CallMethodResponseDecoder {\n    /**\n     * @param {AbiCoder} abiCoder\n     *\n     * @constructor\n     */\n    constructor(abiCoder) {\n        this.abiCoder = abiCoder;\n    }\n\n    /**\n     * Decodes the method response\n     *\n     * @method decode\n     *\n     * @param {Array} abiItemOutputTypes\n     * @param {Object} response\n     *\n     * @returns {*}\n     */\n    decode(abiItemOutputTypes, response) {\n        if (!response) {\n            return null;\n        }\n\n        if (response.length >= 2) {\n            response = response.slice(2);\n        }\n\n        const result = this.abiCoder.decodeParameters(abiItemOutputTypes, response);\n\n        if (result.__length__ === 1) {\n            return result[0];\n        }\n\n        return result;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file EventLogDecoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class EventLogDecoder {\n    /**\n     * @param {AbiCoder} abiCoder\n     * @param {Object} formatters\n     *\n     * @constructor\n     */\n    constructor(abiCoder, formatters) {\n        this.abiCoder = abiCoder;\n        this.formatters = formatters;\n    }\n\n    /**\n     * Decodes the event subscription response\n     *\n     * @method decoder\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {Object} response\n     *\n     * @returns {Object}\n     */\n    decode(abiItemModel, response) {\n        let argTopics = response.topics;\n        if (abiItemModel.anonymous) {\n            argTopics = response.topics.slice(1);\n        }\n\n        response.returnValues = this.abiCoder.decodeLog(abiItemModel.getInputs(), response.data, argTopics);\n        response.event = abiItemModel.name;\n        response.signature = abiItemModel.signature;\n        response.raw = {\n            data: response.data,\n            topics: response.topics\n        };\n\n        if (abiItemModel.anonymous || !response.topics[0]) {\n            response.signature = null;\n        }\n\n        delete response.returnValues.__length__;\n        delete response.data;\n        delete response.topics;\n\n        return response;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file AllEventsLogDecoder.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport EventLogDecoder from './EventLogDecoder';\n\nexport default class AllEventsLogDecoder extends EventLogDecoder {\n    /**\n     * @param {AbiModel} abiModel\n     * @param {AbiCoder} abiCoder\n     * @param {Object} formatters\n     *\n     * @constructor\n     */\n    constructor(abiModel, abiCoder, formatters) {\n        super(abiCoder, formatters);\n\n        this.abiModel = abiModel;\n    }\n\n    /**\n     * Decodes the event subscription response\n     *\n     * @method decoder\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {Object} response\n     *\n     * @returns {Object}\n     */\n    decode(abiItemModel, response) {\n        return super.decode(this.abiModel.getEventBySignature(response.topics[0]), response);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file AbiMapper.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\n\nexport default class AbiMapper {\n    /**\n     * @param {ContractModuleFactory} contractPackageFactory\n     * @param {AbiCoder} abiCoder\n     * @param {Object} utils\n     *\n     * @constructor\n     */\n    constructor(contractPackageFactory, abiCoder, utils) {\n        this.utils = utils;\n        this.abiCoder = abiCoder;\n        this.contractPackageFactory = contractPackageFactory;\n    }\n\n    /**\n     * Maps the abi to an object of methods and events as AbiItemModel\n     *\n     * @param {Array} abi\n     *\n     * @returns {AbiModel}\n     */\n    map(abi) {\n        const self = this;\n        const mappedAbiItems = {\n            methods: {},\n            events: {}\n        };\n\n        abi.forEach((abiItem) => {\n            abiItem.constant = self.isConstant(abiItem);\n            abiItem.payable = self.isPayable(abiItem);\n\n            if (abiItem.name) {\n                abiItem.funcName = self.utils._jsonInterfaceMethodToString(abiItem);\n            }\n\n            let abiItemModel;\n\n            if (abiItem.type === 'function') {\n                abiItem.signature = self.abiCoder.encodeFunctionSignature(abiItem.funcName);\n\n                abiItemModel = self.contractPackageFactory.createAbiItemModel(abiItem);\n\n                // Check if an method already exists with this name and if it exists than create an array and push this abiItem\n                // into it. This will be used if there are methods with the same name but with different arguments.\n                if (!mappedAbiItems.methods[abiItem.name]) {\n                    mappedAbiItems.methods[abiItem.name] = abiItemModel;\n                } else {\n                    if (isArray(mappedAbiItems.methods[abiItem.name])) {\n                        mappedAbiItems.methods[abiItem.name].push(abiItemModel);\n                    } else {\n                        mappedAbiItems.methods[abiItem.name] = [mappedAbiItems.methods[abiItem.name], abiItemModel];\n                    }\n                }\n\n                mappedAbiItems.methods[abiItem.signature] = abiItemModel;\n                mappedAbiItems.methods[abiItem.funcName] = abiItemModel;\n\n                return;\n            }\n\n            if (abiItem.type === 'event') {\n                abiItem.signature = self.abiCoder.encodeEventSignature(abiItem.funcName);\n\n                abiItem = self.contractPackageFactory.createAbiItemModel(event);\n\n                if (!mappedAbiItems.events[abiItem.name] || mappedAbiItems.events[abiItem.name].name === 'bound ') {\n                    mappedAbiItems.events[abiItem.name] = abiItemModel;\n                }\n\n                mappedAbiItems.events[abiItem.signature] = abiItemModel;\n                mappedAbiItems.events[abiItem.funcName] = abiItemModel;\n            }\n\n            if (abiItem.type === 'constructor') {\n                abiItem.signature = abiItem.type;\n                mappedAbiItems.methods['contractConstructor'] = self.contractPackageFactory.createAbiItemModel(abiItem);\n            }\n        });\n\n        return this.contractPackageFactory.createAbiModel(mappedAbiItems);\n    }\n\n    /**\n     * Checks if the given abiItem is a constant\n     *\n     * @method isConstant\n     *\n     * @param {Object} abiItem\n     *\n     * @returns {Boolean}\n     */\n    isConstant(abiItem) {\n        return abiItem.stateMutability === 'view' || abiItem.stateMutability === 'pure' || abiItem.constant;\n    }\n\n    /**\n     * Checks if the given abiItem is payable\n     *\n     * @method isPayable\n     *\n     * @param {Object} abiItem\n     *\n     * @returns {Boolean}\n     */\n    isPayable(abiItem) {\n        return abiItem.stateMutability === 'payable' || abiItem.payable;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file RpcMethodOptionsMapper.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class RpcMethodOptionsMapper {\n    /**\n     * @param {Object} utils\n     * @param {Object} formatters\n     *\n     * @constructor\n     */\n    constructor(utils, formatters) {\n        this.utils = utils;\n        this.formatters = formatters;\n    }\n\n    /**\n     * Sets the default options where it is required\n     *\n     * @param {Contract} contract\n     * @param {Object} options\n     *\n     * @returns {Object}\n     */\n    map(contract, options) {\n        let gasPrice = null;\n        if (options.gasPrice) {\n            gasPrice = String(options.gasPrice);\n        }\n\n        let from = null;\n        if (options.from) {\n            from = this.utils.toChecksumAddress(this.formatters.inputAddressFormatter(options.from));\n        }\n\n        options.to = contract.address;\n        options.from = from || contract.defaultAccount;\n        options.gasPrice = gasPrice || contract.defaultGasPrice;\n        options.gas = options.gas || options.gasLimit || contract.defaultGas;\n\n        delete options.gasLimit;\n\n        return options;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file EventOptionsMapper.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class EventOptionsMapper {\n    /**\n     * @param {Object} formatters\n     * @param {EventFilterEncoder} eventFilterEncoder\n     *\n     * @constructor\n     */\n    constructor(formatters, eventFilterEncoder) {\n        this.formatters = formatters;\n        this.eventFilterEncoder = eventFilterEncoder;\n    }\n\n    /**\n     * @param {AbiItemModel} abiItemModel\n     * @param {Contract} contract\n     * @param {Object} options\n     *\n     * @returns {Object}\n     */\n    map(abiItemModel, contract, options) {\n        if (typeof options.topics === 'undefined') {\n            options.topics = [];\n        }\n\n        if (typeof options.fromBlock !== 'undefined') {\n            options.fromBlock = this.formatters.inputBlockNumberFormatter(options.fromBlock);\n        } else if (contract.defaultBlock !== null) {\n            options.fromBlock = contract.defaultBlock;\n        }\n\n        if (typeof options.toBlock !== 'undefined') {\n            options.toBlock = this.formatters.inputBlockNumberFormatter(options.toBlock);\n        }\n\n        if (!abiItemModel.anonymous) {\n            options.topics.unshift(abiItemModel.signature);\n        }\n\n        if (typeof options.filters !== 'undefined') {\n            options.topics.concat(this.eventFilterEncoder.encode(abiItemModel, options.filter));\n        }\n\n        if (!options.address) {\n            options.address = contract.address;\n        }\n\n        return options;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file AllEventsOptionsMapper.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class AllEventsOptionsMapper {\n    /**\n     * @param {Object} formatters\n     * @param {AllEventsFilterEncoder} allEventsFilterEncoder\n     *\n     * @constructor\n     */\n    constructor(formatters, allEventsFilterEncoder) {\n        this.formatters = formatters;\n        this.allEventsFilterEncoder = allEventsFilterEncoder;\n    }\n\n    /**\n     * @param {AbiModel} abiModel\n     * @param {Contract} contract\n     * @param {Object} options\n     *\n     * @returns {Object}\n     */\n    map(abiModel, contract, options) {\n        options.topics = [];\n\n        if (typeof options.fromBlock !== 'undefined') {\n            options.fromBlock = this.formatters.inputBlockNumberFormatter(options.fromBlock);\n        } else if (contract.defaultBlock !== null) {\n            options.fromBlock = contract.defaultBlock;\n        }\n\n        if (typeof options.toBlock !== 'undefined') {\n            options.toBlock = this.formatters.inputBlockNumberFormatter(options.toBlock);\n        }\n\n        if (typeof options.filters !== 'undefined') {\n            options.topics.concat(this.allEventsFilterEncoder.encode(abiModel, options.filter));\n        }\n\n        if (!options.address) {\n            options.address = contract.address;\n        }\n\n        return options;\n    }\n}\n","// `_isFunction` : an object's function\n// -------------------------------------\n\nimport {toString} from './_quickaccess';\n\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n// IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nfunction customFunction() {\n\tif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof document !== 'undefined' && typeof document.childNodes != 'function') {\n\t\treturn (obj) => typeof obj == 'function' || false;\n\t}\n\treturn null;\n}\n\n// Is a given value a function?\nvar _isFunction = customFunction() || function (obj) {\n\treturn toString.call(obj) === '[object Function]';\n}\n\nexport {_isFunction as default};","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file MethodsProxy.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\nimport isFunction from 'underscore-es/isFunction';\n\nexport default class MethodsProxy {\n    /**\n     * @param {AbstractContract} contract\n     * @param {AbiModel} abiModel\n     * @param {RpcMethodModelFactory} rpcMethodModelFactory\n     * @param {MethodController} methodController\n     * @param {MethodEncoder} methodEncoder\n     * @param {RpcMethodOptionsValidator} rpcMethodOptionsValidator\n     * @param {RpcMethodOptionsMapper} rpcMethodOptionsMapper\n     * @param {PromiEvent} PromiEvent\n     *\n     * @constructor\n     */\n    constructor(\n        contract,\n        abiModel,\n        rpcMethodModelFactory,\n        methodController,\n        methodEncoder,\n        rpcMethodOptionsValidator,\n        rpcMethodOptionsMapper,\n        PromiEvent\n    ) {\n        this.contract = contract;\n        this.abiModel = abiModel;\n        this.rpcMethodModelFactory = rpcMethodModelFactory;\n        this.methodController = methodController;\n        this.methodEncoder = methodEncoder;\n        this.rpcMethodOptionsValidator = rpcMethodOptionsValidator;\n        this.rpcMethodOptionsMapper = rpcMethodOptionsMapper;\n        this.PromiEvent = PromiEvent;\n\n        return new Proxy(this, {\n            get: this.proxyHandler\n        });\n    }\n\n    /**\n     * Checks if a contract event exists by the given name and returns the subscription otherwise it throws an error\n     *\n     * @method proxyHandler\n     *\n     * @param {MethodsProxy} target\n     * @param {String} name\n     *\n     * @returns {Function|Error}\n     */\n    proxyHandler(target, name) {\n        let abiItemModel = this.abiModel.getMethod(name);\n\n        if (abiItemModel) {\n            let requestType = abiItemModel.requestType;\n\n            const anonymousFunction = () => {\n                let methodArguments = arguments;\n\n                // Because of the possibility to overwrite the contract data if I call contract.deploy() have I to check\n                // here if it is a contract deployment. If this call is a contract deployment then I have to set the right\n                // contract data and to map the arguments. TODO: Change API or improve this\n                if (!isArray(abiItemModel) && abiItemModel.isOfType('constructor')) {\n                    if (arguments[0]['data']) {\n                        target.contract.options.data = arguments[0]['data'] || target.contract.options.data;\n                    }\n\n                    if (arguments[0]['arguments']) {\n                        methodArguments = arguments[0]['arguments'];\n                    }\n                }\n\n                // TODO: Find a better solution for the handling of the contractMethodParameters\n                // If there exists more than one method with this name then find the correct abiItemModel\n                if (isArray(abiItemModel)) {\n                    const abiItemModelFound = abiItemModel.some((model) => {\n                        model.contractMethodParameters = methodArguments;\n\n                        try {\n                            model.givenParametersLengthIsValid();\n                        } catch (error) {\n                            return false;\n                        }\n\n                        abiItemModel = model;\n                        return true;\n                    });\n\n                    if (!abiItemModelFound) {\n                        throw new Error(`Methods with name \"${name}\" found but the given parameters are wrong`);\n                    }\n                } else {\n                    abiItemModel.contractMethodParameters = methodArguments;\n                }\n\n                return anonymousFunction;\n            };\n\n            anonymousFunction[requestType] = () => {\n                return target.executeMethod(abiItemModel, arguments);\n            };\n\n            anonymousFunction[requestType].request = () => {\n                return target.createRpcMethodModel(abiItemModel, arguments);\n            };\n\n            anonymousFunction.estimateGas = () => {\n                abiItemModel.requestType = 'estimate';\n\n                return target.executeMethod(abiItemModel, arguments);\n            };\n\n            anonymousFunction.encodeAbi = () => {\n                return target.methodEncoder.encode(abiItemModel, target.contract.options.data);\n            };\n\n            return anonymousFunction;\n        }\n\n        if (target[name]) {\n            return this[name];\n        }\n\n        throw new Error(`Method with name \"${name}\" not found`);\n    }\n\n    /**\n     * Executes the RPC method with the methodController\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {IArguments} methodArguments\n     *\n     * @returns {Promise|PromiEvent|String|Boolean}\n     */\n    executeMethod(abiItemModel, methodArguments) {\n        let rpcMethodModel;\n\n        try {\n            rpcMethodModel = this.createRpcMethodModel(abiItemModel, methodArguments);\n        } catch (error) {\n            return this.handleValidationError(error, methodArguments);\n        }\n\n        return this.methodController.execute(rpcMethodModel, this.contract.accounts, this.contract);\n    }\n\n    /**\n     * Creates the rpc method, encodes the contract method and validate the objects.\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {IArguments} methodArguments\n     *\n     * @returns {AbstractMethodModel}\n     */\n    createRpcMethodModel(abiItemModel, methodArguments) {\n        abiItemModel.givenParametersLengthIsValid();\n\n        // Get correct rpc method model\n        const rpcMethodModel = this.rpcMethodModelFactory.createRpcMethodByRequestType(abiItemModel, this.contract);\n        rpcMethodModel.methodArguments = methodArguments;\n\n        // Encode contract method\n        rpcMethodModel.parameters[0]['data'] = this.methodEncoder.encode(abiItemModel, this.contract.options.data);\n\n        // Set default options in the TxObject if required\n        rpcMethodModel.parameters[0] = this.rpcMethodOptionsMapper.map(this.contract, rpcMethodModel.parameters[0]);\n\n        // Validate TxObject\n        this.rpcMethodOptionsValidator.validate(abiItemModel, rpcMethodModel);\n\n        return rpcMethodModel;\n    }\n\n    /**\n     * Creates an PromiEvent object and rejects it with an error\n     *\n     * @method handleValidationError\n     *\n     * @param {Error} error\n     * @param {IArguments} methodArguments\n     *\n     * @callback callback callback(error, result)\n     * @returns {PromiEvent}\n     */\n    handleValidationError(error, methodArguments) {\n        const promiEvent = new this.PromiEvent();\n\n        const rpcMethodModel = this.rpcMethodModelFactory.createRpcMethodByRequestType(abiItemModel, this.contract);\n        rpcMethodModel.methodArguments = methodArguments;\n\n        promiEvent.resolve(null);\n        promiEvent.reject(error);\n        promiEvent.emit('error', error);\n\n        if (isFunction(rpcMethodModel.callback)) {\n            rpcMethodModel.callback(error, null);\n        }\n\n        return promiEvent;\n    }\n}\n","// `_isUndefined` : an object's function\n// --------------------------------------\n\n// Is a given variable undefined?\nexport default function (obj) {\n\treturn obj === void 0;\n}","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file EventSubscriptionsProxy.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isFunction from 'underscore-es/isFunction';\nimport isUndefined from 'underscore-es/isUndefined';\n\nexport default class EventSubscriptionsProxy {\n    /**\n     * @param {AbstractContract} contract\n     * @param {AbiModel} abiModel\n     * @param {EventSubscriptionFactory} eventSubscriptionFactory\n     * @param {EventOptionsMapper} eventOptionsMapper\n     * @param {EventLogDecoder} eventLogDecoder\n     * @param {AllEventsLogDecoder} allEventsLogDecoder\n     * @param {AllEventsOptionsMapper} allEventsOptionsMapper\n     * @param {PromiEvent} PromiEvent\n     *\n     * @constructor\n     */\n    constructor(\n        contract,\n        abiModel,\n        eventSubscriptionFactory,\n        eventOptionsMapper,\n        eventLogDecoder,\n        allEventsLogDecoder,\n        allEventsOptionsMapper,\n        PromiEvent\n    ) {\n        this.contract = contract;\n        this.eventSubscriptionFactory = eventSubscriptionFactory;\n        this.abiModel = abiModel;\n        this.eventOptionsMapper = eventOptionsMapper;\n        this.eventLogDecoder = eventLogDecoder;\n        this.allEventsLogDecoder = allEventsLogDecoder;\n        this.allEventsOptionsMapper = allEventsOptionsMapper;\n        this.PromiEvent = PromiEvent;\n\n        return new Proxy(this, {\n            get: this.proxyHandler\n        });\n    }\n\n    /**\n     * Checks if a contract event exists by the given name and returns the subscription otherwise it throws an error\n     *\n     * @method proxyHandler\n     *\n     * @param {EventSubscriptionsProxy} target\n     * @param {String} name\n     *\n     * @returns {Function|Error}\n     */\n    proxyHandler(target, name) {\n        if (this.abiModel.hasEvent(name)) {\n            return (options, callback) => {\n                return target.subscribe(target.abiModel.getEvent(name), options, callback);\n            };\n        }\n\n        if (name === 'allEvents') {\n            return (options, callback) => {\n                return target.subscribeAll(options, callback);\n            };\n        }\n\n        if (target[name]) {\n            return target[name];\n        }\n\n        throw new Error(`Event with name \"${name}\" not found`);\n    }\n\n    /**\n     * Returns an subscription on the given event\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {Object} options\n     * @param {Function} callback\n     *\n     * @returns {Subscription|PromiEvent}\n     */\n    subscribe(abiItemModel, options, callback) {\n        if (!isUndefined(options.filters) && !isUndefined(options.topics)) {\n            return this.handleValidationError(\n                'Invalid subscription options: Only filter or topics are allowed and not both',\n                callback\n            );\n        }\n\n        return this.eventSubscriptionFactory\n            .createEventLogSubscription(\n                this.eventLogDecoder,\n                abiItemModel,\n                this.contract,\n                this.eventOptionsMapper.map(abiItemModel, this.contract, options)\n            )\n            .subscribe(callback);\n    }\n\n    /**\n     * Returns an subscription for all contract events\n     *\n     * @method subscribeAll\n     *\n     * @param {Object} options\n     * @param {Function} callback\n     *\n     * @returns {Subscription|PromiEvent}\n     */\n    subscribeAll(options, callback) {\n        if (!isUndefined(options.topics)) {\n            return this.handleValidationError(\n                'Invalid subscription options: Topics are not allowed for the \"allEvents\" subscription',\n                callback\n            );\n        }\n\n        return this.eventSubscriptionFactory\n            .createAllEventLogSubscription(\n                this.allEventsLogDecoder,\n                this.contract,\n                this.allEventsOptionsMapper.map(this.abiModel, this.contract, options)\n            )\n            .subscribe(callback);\n    }\n\n    /**\n     * Creates an promiEvent and rejects it with an error\n     *\n     * @method handleValidationError\n     *\n     * @param {String} errorMessage\n     * @param {Function} callback\n     *\n     * @callback callback callback(error, result)\n     * @returns {PromiEvent}\n     */\n    handleValidationError(errorMessage, callback) {\n        const promiEvent = new this.PromiEvent();\n\n        const error = new Error(errorMessage);\n        promiEvent.emit('error', error);\n\n        if (isFunction(callback)) {\n            callback(error, null);\n        }\n\n        return promiEvent;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file RpcMethodOptionsValidator.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nexport default class RpcMethodOptionsValidator {\n    /**\n     * @param {Object} utils\n     *\n     * @constructor\n     */\n    constructor(utils) {\n        this.utils = utils;\n    }\n\n    /**\n     * Validates the options object for the RPC-Method call\n     *\n     * @method validate\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {AbstractMethodModel} rpcMethodModel\n     *\n     * @returns {Error|Boolean}\n     */\n    validate(abiItemModel, rpcMethodModel) {\n        if (!this.isToSet(abiItemModel, rpcMethodModel)) {\n            throw new Error(\"This contract object doesn't have address set yet, please set an address first.\");\n        }\n\n        if (!this.isFromSet(rpcMethodModel)) {\n            throw new Error('No \"from\" address specified in neither the given options, nor the default options.');\n        }\n\n        if (!this.isValueValid(abiItemModel, rpcMethodModel)) {\n            throw new Error('Can not send value to non-payable contract method or constructor');\n        }\n\n        return true;\n    }\n\n    /**\n     * Checks if the property to is set in the options object\n     *\n     * @method isToSet\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {AbstractMethodModel} rpcMethodModel\n     *\n     * @returns {Boolean}\n     */\n    isToSet(abiItemModel, rpcMethodModel) {\n        if (abiItemModel.signature === 'constructor') {\n            return true;\n        }\n\n        return this.utils.isAddress(rpcMethodModel.parameters[0].to);\n    }\n\n    /**\n     * Checks if the property from of the options object is set and a valid address\n     *\n     * @method isFromSet\n     *\n     * @param {AbstractMethodModel} rpcMethodModel\n     *\n     * @returns {Boolean}\n     */\n    isFromSet(rpcMethodModel) {\n        return this.utils.isAddress(rpcMethodModel.parameters[0].from);\n    }\n\n    /**\n     * Checks if no value is set for an non-payable method\n     *\n     * @method isValueValid\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {AbstractMethodModel} rpcMethodModel\n     *\n     * @returns {Boolean}\n     */\n    isValueValid(abiItemModel, rpcMethodModel) {\n        return !(!abiItemModel.payable && rpcMethodModel.parameters[0].value && rpcMethodModel.parameters[0].value > 0);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file CallContractMethodModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {CallMethodModel} from 'web3-core-method';\n\nexport default class CallContractMethodModel extends CallMethodModel {\n    /**\n     * @param {AbiItemModel} abiItemModel\n     * @param {CallMethodResponseDecoder} callMethodResponseDecoder\n     * @param {Object} utils\n     * @param {Object} formatters\n     *\n     * @constructor\n     */\n    constructor(abiItemModel, callMethodResponseDecoder, utils, formatters) {\n        super(utils, formatters);\n\n        this.callMethodResponseDecoder = callMethodResponseDecoder;\n        this.abiItemModel = abiItemModel;\n    }\n\n    /**\n     * This method will be executed after the RPC request.\n     *\n     * @method afterExecution\n     *\n     * @param {Array} response\n     *\n     * @returns {*}\n     */\n    afterExecution(response) {\n        return this.callMethodResponseDecoder.decode(this.abiItemModel, response);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file ContractDeployMethodModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {SendTransactionMethodModel} from 'web3-core-method';\n\nexport default class ContractDeployMethodModel extends SendTransactionMethodModel {\n    /**\n     * @param {Contract} contract\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {Accounts} accounts\n     *\n     * @constructor\n     */\n    constructor(contract, utils, formatters, accounts) {\n        super(utils, formatters, accounts);\n\n        this.contract = contract;\n    }\n\n    /**\n     * This method will be executed before the RPC request.\n     *\n     * @method beforeExecution\n     *\n     * @param {AbstractWeb3Module} moduleInstance - The module where the method is called from for example Eth.\n     */\n    beforeExecution(moduleInstance) {\n        super.beforeExecution(moduleInstance);\n        delete this.parameters[0].to;\n    }\n\n    /**\n     * This method will be executed after the RPC request.\n     *\n     * @method afterExecution\n     *\n     * @param {Object} response\n     *\n     * @returns {*}\n     */\n    afterExecution(response) {\n        const clonedContract = this.contract.clone();\n        clonedContract.options.address = response.contractAddress;\n\n        return clonedContract;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file PastEventLogsMethodModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {GetPastLogsMethodModel} from 'web3-core-method';\n\nexport default class PastEventLogsMethodModel extends GetPastLogsMethodModel {\n    /**\n     * @param {AbiItemModel} abiItemModel\n     * @param {Object} utils\n     * @param {Object} formatters\n     *\n     * @constructor\n     */\n    constructor(abiItemModel, utils, formatters) {\n        super(utils, formatters);\n\n        this.abiItemModel = abiItemModel;\n    }\n\n    /**\n     * This method will be executed after the RPC request.\n     *\n     * @method afterExecution\n     *\n     * @param {Array} response\n     *\n     * @returns {Array}\n     */\n    afterExecution(response) {\n        const formattedLogs = super.afterExecution(response);\n\n        formattedLogs.map((logItem) => {\n            return this.eventLogDecoder.decode(self.abiItemModel, logItem);\n        });\n\n        return formattedLogs;\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file SendContractMethodModel.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport isArray from 'underscore-es/isArray';\nimport {SendTransactionMethodModel} from 'web3-core-method';\n\nexport default class SendContractMethodModel extends SendTransactionMethodModel {\n    /**\n     * @param {AbiItemModel} abiItemModel\n     * @param {AllEventsLogDecoder} allEventsLogDecoder\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {Accounts} accounts\n     *\n     * @constructor\n     */\n    constructor(abiItemModel, allEventsLogDecoder, utils, formatters, accounts) {\n        super(utils, formatters, accounts);\n\n        this.abiItemModel = abiItemModel;\n        this.allEventsLogDecoder = allEventsLogDecoder;\n    }\n\n    /**\n     * This method will be executed after the RPC request.\n     *\n     * @method afterExecution\n     *\n     * @param {Object} response\n     *\n     * @returns {*}\n     */\n    afterExecution(response) {\n        if (isArray(response.logs)) {\n            response.events = {};\n\n            response.logs.map((log) => {\n                return this.allEventsLogDecoder.decode(null, log);\n            });\n\n            response.logs.forEach((log, index) => {\n                if (log.event) {\n                    if (response.events[log.event]) {\n                        if (isArray(response.events[log.event])) {\n                            response.events[log.event].push(log);\n\n                            return;\n                        }\n\n                        response.events[log.event] = [response.events[log.event], log];\n\n                        return;\n                    }\n\n                    response.events[log.event] = log;\n\n                    return;\n                }\n\n                response.events[index] = log;\n            });\n\n            delete response.logs;\n        }\n\n        return response;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file RpcMethodFactory.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport CallContractMethodModel from '../models/methods/CallContractMethodModel';\nimport ContractDeployMethodModel from '../models/methods/ContractDeployMethodModel';\nimport PastEventLogsMethodModel from '../models/methods/PastEventLogsMethodModel';\nimport SendContractMethodModel from '../models/methods/SendContractMethodModel';\nimport {EstimateGasMethodModel} from 'web3-core-method';\n\nexport default class RpcMethodModelFactory {\n    /**\n     * @param {CallMethodResponseDecoder} callMethodResponseDecoder\n     * @param {Accounts} accounts\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {AllEventsLogDecoder} allEventsLogDecoder\n     *\n     * @constructor\n     */\n    constructor(callMethodResponseDecoder, accounts, utils, formatters, allEventsLogDecoder) {\n        this.utils = utils;\n        this.formatters = formatters;\n        this.callMethodResponseDecoder = callMethodResponseDecoder;\n        this.accounts = accounts;\n        this.allEventsLogDecoder = allEventsLogDecoder;\n    }\n\n    /**\n     * Returns the correct JSON-RPC MethodModel\n     *\n     * @method createRpcMethod\n     *\n     * @param {AbiItemModel} abiItemModel\n     * @param {Contract} contract\n     *\n     * @returns {AbstractMethodModel}\n     */\n    createRpcMethodByRequestType(abiItemModel, contract) {\n        let rpcMethod;\n\n        switch (abiItemModel.requestType) {\n            case 'call':\n                rpcMethod = this.createCallContractMethodModel(abiItemModel);\n                break;\n            case 'send':\n                rpcMethod = this.createSendContractMethodModel(abiItemModel);\n                break;\n            case 'estimate':\n                rpcMethod = this.createEstimateGasMethodModel();\n                break;\n            case 'contract-deployment':\n                rpcMethod = this.createContractDeployMethodModel(contract);\n                break;\n        }\n\n        if (typeof rpcMethod === 'undefined') {\n            throw new TypeError(`RPC call not found with requestType \"${abiItemModel.requestType}\"`);\n        }\n\n        return rpcMethod;\n    }\n\n    /**\n     * Returns an object of type PastEventLogsMethodModel\n     *\n     * @method createPastEventLogsMethodModel\n     *\n     * @param {AbiItemModel} abiItemModel\n     *\n     * @returns {PastEventLogsMethodModel}\n     */\n    createPastEventLogsMethodModel(abiItemModel) {\n        return new PastEventLogsMethodModel(abiItemModel, this.utils, this.formatters);\n    }\n\n    /**\n     * Returns an object of type CallContractMethodModel\n     *\n     * @method createCallContractMethodModel\n     *\n     * @param {AbiItemModel} abiItemModel\n     *\n     * @returns {CallContractMethodModel}\n     */\n    createCallContractMethodModel(abiItemModel) {\n        return new CallContractMethodModel(abiItemModel, this.callMethodResponseDecoder, this.utils, this.formatters);\n    }\n\n    /**\n     * Returns an object of type SendContractMethodModel\n     *\n     * @method createSendContractMethodModel\n     *\n     * @param {AbiItemModel} abiItemModel\n     *\n     * @returns {SendContractMethodModel}\n     */\n    createSendContractMethodModel(abiItemModel) {\n        return new SendContractMethodModel(\n            abiItemModel,\n            this.allEventsLogDecoder,\n            this.utils,\n            this.formatters,\n            this.accounts\n        );\n    }\n\n    /**\n     * Returns an object of type ContractDeployMethodModel\n     *\n     * @method createContractDeployMethodModel\n     *\n     * @param {Contract} contract\n     *\n     * @returns {ContractDeployMethodModel}\n     */\n    createContractDeployMethodModel(contract) {\n        return new ContractDeployMethodModel(contract, this.utils, this.formatters, this.accounts);\n    }\n\n    /**\n     * Returns an object of type EstimateGasMethodModel\n     *\n     * @method createEstimateGasMethodModel\n     *\n     * @returns {EstimateGasMethodModel}\n     */\n    createEstimateGasMethodModel() {\n        return new EstimateGasMethodModel(this.utils, this.formatters);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file EventLogSubscription.js\n * @authors: Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {LogSubscriptionModel} from 'web3-core-subscriptions';\n\nexport default class EventLogSubscription extends LogSubscriptionModel {\n    /**\n     * @param {AbiItemModel} abiItemModel\n     * @param {Object} options\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {GetPastLogsMethodModel} getPastLogsMethodModel\n     * @param {MethodController} methodController\n     * @param {EventLogDecoder} eventLogDecoder\n     *\n     * @constructor\n     */\n    constructor(abiItemModel, options, utils, formatters, getPastLogsMethodModel, methodController, eventLogDecoder) {\n        super(options, utils, formatters, getPastLogsMethodModel, methodController);\n\n        this.eventLogDecoder = eventLogDecoder;\n        this.abiItemModel = abiItemModel;\n    }\n\n    /**\n     * This method will be executed on each new subscription item.\n     *\n     * @method onNewSubscriptionItem\n     *\n     * @param {Subscription} subscription\n     * @param {*} subscriptionItem\n     *\n     * @returns {Object}\n     */\n    onNewSubscriptionItem(subscription, subscriptionItem) {\n        return this.eventLogDecoder.decode(this.abiItemModel, this.formatters.outputLogFormatter(subscriptionItem));\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file AllEventsLogSubscription.js\n * @authors: Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {LogSubscriptionModel} from 'web3-core-subscriptions';\n\nexport default class AllEventsLogSubscription extends LogSubscriptionModel {\n    /**\n     * @param {Object} options\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {GetPastLogsMethodModel} getPastLogsMethodModel\n     * @param {MethodController} methodController\n     * @param {EventLogDecoder} allEventsLogDecoder\n     *\n     * @constructor\n     */\n    constructor(options, utils, formatters, getPastLogsMethodModel, methodController, allEventsLogDecoder) {\n        super(options, utils, formatters, getPastLogsMethodModel, methodController);\n\n        this.allEventsLogDecoder = allEventsLogDecoder;\n    }\n\n    /**\n     * This method will be executed on each new subscription item.\n     *\n     * @method onNewSubscriptionItem\n     *\n     * @param {Subscription} subscription\n     * @param {*} subscriptionItem\n     *\n     * @returns {Object}\n     */\n    onNewSubscriptionItem(subscription, subscriptionItem) {\n        return this.allEventsLogDecoder.decode(null, this.formatters.outputLogFormatter(subscriptionItem));\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file SubscriptionFactory.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {Subscription} from 'web3-core-subscriptions';\nimport {GetPastLogsMethodModel} from 'web3-core-method';\nimport EventLogSubscription from '../models/subscriptions/EventLogSubscription';\nimport AllEventsLogSubscription from '../models/subscriptions/AllEventsLogSubscription';\n\nexport default class EventSubscriptionFactory {\n    /**\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {MethodController} methodController\n     *\n     * @constructor\n     */\n    constructor(utils, formatters, methodController) {\n        this.utils = utils;\n        this.formatters = formatters;\n        this.methodController = methodController;\n    }\n\n    /**\n     * Returns an event log subscription\n     *\n     * @param {EventLogDecoder} eventLogDecoder\n     * @param {AbiItemModel} abiItemModel\n     * @param {AbstractWeb3Module} moduleInstance\n     * @param {Object} options\n     *\n     * @returns {Subscription}\n     */\n    createEventLogSubscription(eventLogDecoder, abiItemModel, moduleInstance, options) {\n        return new Subscription(\n            new EventLogSubscription(\n                abiItemModel,\n                options,\n                this.utils,\n                this.formatters,\n                new GetPastLogsMethodModel(this.utils, this.formatters),\n                this.methodController,\n                eventLogDecoder\n            ),\n            moduleInstance\n        );\n    }\n\n    /**\n     * Returns an log subscription for all events\n     *\n     * @param {AllEventsLogDecoder} allEventsLogDecoder\n     * @param {AbstractWeb3Module} moduleInstance\n     * @param {Object} options\n     *\n     * @returns {Subscription}\n     */\n    createAllEventLogSubscription(allEventsLogDecoder, moduleInstance, options) {\n        return new Subscription(\n            new AllEventsLogSubscription(\n                options,\n                this.utils,\n                this.formatters,\n                new GetPastLogsMethodModel(this.utils, this.formatters),\n                this.methodController,\n                allEventsLogDecoder\n            ),\n            moduleInstance\n        );\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file AbstractContract.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport {AbstractWeb3Module} from 'web3-core';\n\nexport default class AbstractContract extends AbstractWeb3Module {\n    /**\n     * @param {AbstractProviderAdapter|EthereumProvider} provider\n     * @param {ProvidersModuleFactory} providersModuleFactory\n     * @param {Object} providers\n     * @param {MethodController} methodController\n     * @param {ContractModuleFactory} contractModuleFactory\n     * @param {PromiEvent} PromiEvent\n     * @param {AbiCoder} abiCoder\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {Accounts} accounts\n     * @param {Object} abi\n     * @param {String} address\n     * @param {Object} options\n     *\n     * @constructor\n     */\n    constructor(\n        provider,\n        providersModuleFactory,\n        providers,\n        methodController,\n        contractModuleFactory,\n        PromiEvent,\n        abiCoder,\n        utils,\n        formatters,\n        accounts,\n        abi,\n        address,\n        options\n    ) {\n        super(provider, providersModuleFactory, providers, methodController, null, options);\n\n        if (!(this instanceof AbstractContract)) {\n            throw new TypeError('Please use the \"new\" keyword to instantiate a web3.eth.contract() object!');\n        }\n\n        if (!abi || !Array.isArray(abi)) {\n            throw new Error(\n                'You must provide the json interface of the contract when instantiating a contract object.'\n            );\n        }\n\n        this.contractModuleFactory = contractModuleFactory;\n        this.abiCoder = abiCoder;\n        this.utils = utils;\n        this.formatters = formatters;\n        this.accounts = accounts;\n        this.abiMapper = contractModuleFactory.createAbiMapper();\n        this.options = options;\n        this.PromiEvent = PromiEvent;\n        this.rpcMethodModelFactory = contractModuleFactory.createRpcMethodModelFactory();\n        this.abiModel = this.abiMapper.map(abi);\n        this.address = address;\n        this.options = options;\n\n        this.methods = contractModuleFactory.createMethodsProxy(\n            this,\n            this.abiModel,\n            this.methodController,\n            this.PromiEvent\n        );\n\n        this.events = contractModuleFactory.createEventSubscriptionsProxy(\n            this,\n            this.abiModel,\n            this.methodController,\n            this.PromiEvent\n        );\n    }\n\n    /**\n     * Adds event listeners and creates a subscription, and remove it once its fired.\n     *\n     * @method once\n     *\n     * @param {String} eventName\n     * @param {Object} options\n     * @param {Function} callback\n     *\n     * @callback callback callback(error, result)\n     * @returns {undefined}\n     */\n    once(eventName, options, callback) {\n        if (!callback) {\n            throw new Error('Once requires a callback function.');\n        }\n\n        if (options) {\n            delete options.fromBlock;\n        }\n\n        const eventSubscription = this.events[event](options, callback);\n\n        eventSubscription.on('data', () => {\n            eventSubscription.unsubscribe();\n        });\n    }\n\n    /**\n     * Returns the past event logs by his name\n     *\n     * @method getPastEvents\n     *\n     * @param {String} eventName\n     * @param {Object} options\n     * @param {Function} callback\n     *\n     * @callback callback callback(error, result)\n     * @returns {Promise<Array>}\n     */\n    getPastEvents(eventName, options, callback) {\n        if (!this.options.jsonInterface.hasEvent(eventName)) {\n            throw new Error(`Event with name \"${eventName}does not exists.`);\n        }\n\n        const pastEventLogsMethodModel = this.rpcMethodModelFactory.createPastEventLogsMethodModel(\n            this.options.jsonInterface.getEvent(eventName)\n        );\n\n        pastEventLogsMethodModel.parameters = [options];\n        pastEventLogsMethodModel.callback = callback;\n\n        return this.methodController.execute(pastEventLogsMethodModel, this.accounts, this);\n    }\n\n    /**\n     * Deploy an contract and returns an new Contract instance with the correct address set\n     *\n     * @method deploy\n     *\n     * @param {Object} options\n     *\n     * @returns {Promise<Contract>|EventEmitter}\n     */\n    deploy(options) {\n        return this.methods.contractConstructor(options);\n    }\n\n    /**\n     * Return an new instance of the Contract object\n     *\n     * @method clone\n     *\n     * @returns {AbstractContract}\n     */\n    clone() {\n        const contract = new this.constructor(\n            this.currentProvider,\n            this.providersModuleFactory,\n            this.providers,\n            this.methodController,\n            this.contractModuleFactory,\n            this.PromiEvent,\n            this.abiCoder,\n            this.utils,\n            this.formatters,\n            this.accounts,\n            this.abiMapper,\n            {},\n            this.address,\n            this.options\n        );\n\n        contract.abiModel = this.abiModel;\n\n        return contract;\n    }\n\n    /**\n     * Sets the currentProvider and provider property\n     *\n     * @method setProvider\n     *\n     * @param {Object|String} provider\n     * @param {Net} net\n     *\n     * @returns {Boolean}\n     */\n    setProvider(provider, net) {\n        return !!(super.setProvider(provider, net) && this.accounts.setProvider(provider, net));\n    }\n\n    /**\n     * Returns the jsonInterface\n     *\n     * @property abiModel\n     *\n     * @returns {AbiModel}\n     */\n    get jsonInterface() {\n        return this.abiModel;\n    }\n\n    /**\n     * Sets the abiModel property\n     *\n     * @property abiModel\n     *\n     * @param {Object} value\n     */\n    set jsonInterface(value) {\n        this.abiModel = this.abiMapper.map(value);\n        this.methods.abiModel = this.abiModel;\n        this.events.abiModel = this.abiModel;\n    }\n\n    /**\n     * Sets the defaultGasPrice property on the current object and the accounts module\n     *\n     * @property defaultGasPrice\n     *\n     * @param {String} value\n     */\n    set defaultGasPrice(value) {\n        super.defaultGasPrice = value;\n        this.accounts.defaultGasPrice = value;\n    }\n\n    /**\n     * Sets the defaultGas property on the current object and the accounts module\n     *\n     * @property defaultGas\n     *\n     * @param {Number} value\n     */\n    set defaultGas(value) {\n        super.defaultGas = value;\n        this.accounts.defaultGas = value;\n    }\n\n    /**\n     * Sets the transactionBlockTimeout property on the current object and the accounts module\n     *\n     * @property transactionBlockTimeout\n     *\n     * @param {Number} value\n     */\n    set transactionBlockTimeout(value) {\n        super.transactionBlockTimeout = value;\n        this.accounts.transactionBlockTimeout = value;\n    }\n\n    /**\n     * Sets the transactionConfirmationBlocks property on the current object and the accounts module\n     *\n     * @property transactionConfirmationBlocks\n     *\n     * @param {Number} value\n     */\n    set transactionConfirmationBlocks(value) {\n        super.transactionConfirmationBlocks = value;\n        this.accounts.transactionConfirmationBlocks = value;\n    }\n\n    /**\n     * Sets the transactionPollingTimeout property on the current object and the accounts module\n     *\n     * @property transactionPollingTimeout\n     *\n     * @param {Number} value\n     */\n    set transactionPollingTimeout(value) {\n        super.transactionPollingTimeout = value;\n        this.accounts.transactionPollingTimeout = value;\n    }\n\n    /**\n     * Sets the defaultAccount property on the current object and the accounts module\n     *\n     * @property defaultAccount\n     *\n     * @param {String} value\n     */\n    set defaultAccount(value) {\n        super.defaultAccount = value;\n        this.accounts.defaultAccount = value;\n    }\n\n    /**\n     * Sets the defaultBlock property on the current object and the accounts module\n     *\n     * @property defaultBlock\n     *\n     * @param value\n     */\n    set defaultBlock(value) {\n        super.defaultBlock = value;\n        this.accounts.defaultBlock = value;\n    }\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file ContractModuleFactory.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport AbiModel from '../models/abi/AbiModel';\nimport AbiItemModel from '../models/abi/AbiItemModel';\nimport MethodEncoder from '../encoders/MethodEncoder';\nimport EventFilterEncoder from '../encoders/EventFilterEncoder';\nimport AllEventsFilterEncoder from '../encoders/AllEventsFilterEncoder';\nimport CallMethodResponseDecoder from '../decoders/CallMethodResponseDecoder';\nimport EventLogDecoder from '../decoders/EventLogDecoder';\nimport AllEventsLogDecoder from '../decoders/AllEventsLogDecoder';\nimport AbiMapper from '../mappers/AbiMapper';\nimport RpcMethodOptionsMapper from '../mappers/RpcMethodOptionsMapper';\nimport EventOptionsMapper from '../mappers/EventOptionsMapper';\nimport AllEventsOptionsMapper from '../mappers/AllEventsOptionsMapper';\nimport MethodsProxy from '../proxies/MethodsProxy';\nimport EventSubscriptionsProxy from '../proxies/EventSubscriptionsProxy';\nimport RpcMethodOptionsValidator from '../validators/RpcMethodOptionsValidator';\nimport RpcMethodFactory from '../factories/RpcMethodModelFactory';\nimport EventSubscriptionFactory from '../factories/EventSubscriptionFactory';\nimport AbstractContract from '../AbstractContract';\n\nexport default class ContractModuleFactory {\n    /**\n     * @param {Object} utils\n     * @param {Object} formatters\n     * @param {AbiCoder} abiCoder\n     * @param {Accounts} accounts\n     *\n     * @constructor\n     */\n    constructor(utils, formatters, abiCoder, accounts) {\n        this.utils = utils;\n        this.formatters = formatters;\n        this.abiCoder = abiCoder;\n        this.accounts = accounts;\n    }\n\n    /**\n     * Returns an object of type AbstractContract\n     *\n     * @method createContract\n     *\n     * @param {AbstractProviderAdapter|EthereumProvider} provider\n     * @param {ProvidersModuleFactory} providersModuleFactory\n     * @param {Object} providers\n     * @param {MethodController} methodController\n     * @param {PromiEvent} PromiEvent\n     * @param {Object} abi\n     * @param {String} address\n     * @param {Object} options\n     *\n     * @returns {AbstractContract}\n     */\n    createContract(provider, providersModuleFactory, providers, methodController, PromiEvent, abi, address, options) {\n        return new AbstractContract(\n            provider,\n            providersModuleFactory,\n            providers,\n            methodController,\n            this,\n            PromiEvent,\n            this.abiCoder,\n            this.utils,\n            this.formatters,\n            this.accounts,\n            abi,\n            address,\n            options\n        );\n    }\n\n    /**\n     * Returns an object of type AbiModel\n     *\n     * @method createAbiModel\n     *\n     * @param {Object} mappedAbi\n     *\n     * @returns {AbiModel}\n     */\n    createAbiModel(mappedAbi) {\n        return new AbiModel(mappedAbi);\n    }\n\n    /**\n     * Returns an object of type AbiItemModel\n     *\n     * @method createAbiItemModel\n     *\n     * @param {Object} abiItem\n     *\n     * @returns {AbiItemModel}\n     */\n    createAbiItemModel(abiItem) {\n        return new AbiItemModel(abiItem);\n    }\n\n    /**\n     * Returns an object of type MethodEncoder\n     *\n     * @method createMethodEncoder\n     *\n     * @returns {MethodEncoder}\n     */\n    createMethodEncoder() {\n        return new MethodEncoder(this.abiCoder);\n    }\n\n    /**\n     * Returns an object of type EventFilterEncoder\n     *\n     * @method createEventFilterEncoder\n     *\n     * @returns {EventFilterEncoder}\n     */\n    createEventFilterEncoder() {\n        return new EventFilterEncoder(this.abiCoder);\n    }\n\n    /**\n     * Returns an object of type AllEventsFilterEncoder\n     *\n     * @method createAllEventsFilterEncoder\n     *\n     * @returns {AllEventsFilterEncoder}\n     */\n    createAllEventsFilterEncoder() {\n        return new AllEventsFilterEncoder(this.abiCoder);\n    }\n\n    /**\n     * Returns an object oftype AbiMapper\n     *\n     * @method createAbiMapper\n     *\n     * @returns {AbiMapper}\n     */\n    createAbiMapper() {\n        return new AbiMapper(this, this.abiCoder, this.utils);\n    }\n\n    /**\n     * Returns an object of type CallMethodResponseDecoder\n     *\n     * @method createCallMethodResponseDecoder\n     *\n     * @returns {CallMethodResponseDecoder}\n     */\n    createCallMethodResponseDecoder() {\n        return new CallMethodResponseDecoder(this.abiCoder);\n    }\n\n    /**\n     * Returns an object of type EventLogDecoder\n     *\n     * @method createEventLogDecoder\n     *\n     * @returns {EventLogDecoder}\n     */\n    createEventLogDecoder() {\n        return new EventLogDecoder(this.abiCoder, this.formatters);\n    }\n\n    /**\n     * Returns an object of type AllEventsLogDecoder\n     *\n     * @method createAllEventsLogDecoder\n     *\n     * @returns {AllEventsLogDecoder}\n     */\n    createAllEventsLogDecoder() {\n        return new AllEventsLogDecoder(this.abiCoder, this.formatters);\n    }\n\n    /**\n     * Returns an object of type RpcMethodOptionsValidator\n     *\n     * @method createRpcMethodOptionsValidator\n     *\n     * @returns {RpcMethodOptionsValidator}\n     */\n    createRpcMethodOptionsValidator() {\n        return new RpcMethodOptionsValidator(this.utils);\n    }\n\n    /**\n     * Returns an object of type RpcMethodOptionsMapper\n     *\n     * @method createRpcMethodOptionsMapper\n     *\n     * @returns {RpcMethodOptionsMapper}\n     */\n    createRpcMethodOptionsMapper() {\n        return new RpcMethodOptionsMapper(this.utils, this.formatters);\n    }\n\n    /**\n     * Returns an object of type EventOptionsMapper\n     *\n     * @method createEventOptionsMapper\n     *\n     * @returns {EventOptionsMapper}\n     */\n    createEventOptionsMapper() {\n        return new EventOptionsMapper(this.formatters, this.createEventFilterEncoder());\n    }\n\n    /**\n     * Returns an object of type AllEventsOptionsMapper\n     *\n     * @method createAllEventsOptionsMapper\n     *\n     * @returns {AllEventsOptionsMapper}\n     */\n    createAllEventsOptionsMapper() {\n        return new AllEventsOptionsMapper(this.formatters, this.createAllEventsFilterEncoder());\n    }\n\n    /**\n     * Returns an object of type RpcMethodModelFactory\n     *\n     * @method createRpcMethodModelFactory\n     *\n     * @returns {RpcMethodModelFactory}\n     */\n    createRpcMethodModelFactory() {\n        return new RpcMethodFactory(\n            this.createCallMethodResponseDecoder(),\n            this.accounts,\n            this.utils,\n            this.formatters,\n            this.createAllEventsLogDecoder()\n        );\n    }\n\n    /**\n     * Returns an object of type MethodsProxy\n     *\n     * @method createMethodsProxy\n     *\n     * @param {Contract} contract\n     * @param {AbiModel} abiModel\n     * @param {MethodController} methodController\n     * @param {PromiEvent} PromiEvent\n     *\n     * @returns {MethodsProxy}\n     */\n    createMethodsProxy(contract, abiModel, methodController, PromiEvent) {\n        return new MethodsProxy(\n            contract,\n            abiModel,\n            this.createRpcMethodModelFactory(),\n            methodController,\n            this.createMethodEncoder(),\n            this.createRpcMethodOptionsValidator(),\n            this.createRpcMethodOptionsMapper(),\n            PromiEvent\n        );\n    }\n\n    /**\n     * Returns an object of type EventSubscriptionsProxy\n     *\n     * @method createEventSubscriptionsProxy\n     *\n     * @param {Contract} contract\n     * @param {AbiModel} abiModel\n     * @param {MethodController} methodController\n     * @param {PromiEvent} PromiEvent\n     *\n     * @returns {EventSubscriptionsProxy}\n     */\n    createEventSubscriptionsProxy(contract, abiModel, methodController, PromiEvent) {\n        return new EventSubscriptionsProxy(\n            contract,\n            abiModel,\n            this.createEventSubscriptionFactory(methodController),\n            this.createEventOptionsMapper(),\n            this.createEventLogDecoder(),\n            this.createAllEventsLogDecoder(),\n            this.createAllEventsOptionsMapper(),\n            PromiEvent\n        );\n    }\n\n    /**\n     * Returns an object of type EventSubscriptionFactory\n     *\n     * @method createEventSubscriptionFactory\n     *\n     * @param {MethodController} methodController\n     *\n     * @returns {EventSubscriptionFactory}\n     */\n    createEventSubscriptionFactory(methodController) {\n        return new EventSubscriptionFactory(this.utils, this.formatters, methodController);\n    }\n}\n","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file index.js\n * @author Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n\nimport * as Utils from 'web3-utils';\nimport {formatters} from 'web3-core-helpers';\nimport {AbiCoder} from 'web3-eth-abi';\nimport {MethodController} from 'web3-core-method';\nimport {PromiEvent} from 'web3-core-promievent';\nimport {ProvidersModuleFactory, providers} from 'web3-providers';\nimport {Accounts} from 'web3-eth-accounts';\nimport ContractModuleFactory from './factories/ContractModuleFactory';\n\nexport AbstractContract from './AbstractContract';\nexport ContractDeployMethodModel from './models/methods/ContractDeployMethodModel';\nexport ContractModuleFactory from './factories/ContractModuleFactory';\n\n/**\n * Returns an object of type Contract\n *\n * @method Contract\n *\n * @param {AbstractProviderAdapter|EthereumProvider} provider\n * @param {Object} abi\n * @param {String} address\n * @param {Object} options\n *\n * @returns {AbstractContract}\n */\nexport const Contract = (provider, abi, address, options) => {\n    return new ContractModuleFactory(Utils, formatters, new AbiCoder(), new Accounts(provider, options)).createContract(\n        provider,\n        new ProvidersModuleFactory(),\n        providers,\n        new MethodController(),\n        PromiEvent,\n        abi,\n        address,\n        options\n    );\n};\n"],"names":["AbiModel","constructor","mappedAbi","abi","getMethod","name","hasMethod","methods","getEvent","hasEvent","events","getEvents","getEventBySignature","signature","find","event","AbiItemModel","abiItem","anonymous","contractMethodParameters","Object","defineProperty","get","type","constant","getInputLength","isArray","inputs","length","getInputs","givenParametersLengthIsValid","inputLength","Error","getIndexedInputs","filter","input","indexed","isOfType","MethodEncoder","abiCoder","encode","abiItemModel","deployData","encodedParameters","encodeParameters","replace","EventFilterEncoder","indexedInputs","topics","forEach","indexedInput","filterItem","map","item","encodeParameter","push","AllEventsFilterEncoder","abiModel","keys","key","CallMethodResponseDecoder","decode","abiItemOutputTypes","response","slice","result","decodeParameters","__length__","EventLogDecoder","formatters","argTopics","returnValues","decodeLog","data","raw","AllEventsLogDecoder","AbiMapper","contractPackageFactory","utils","self","mappedAbiItems","isConstant","payable","isPayable","funcName","_jsonInterfaceMethodToString","encodeFunctionSignature","createAbiItemModel","encodeEventSignature","createAbiModel","stateMutability","RpcMethodOptionsMapper","contract","options","gasPrice","String","from","toChecksumAddress","inputAddressFormatter","to","address","defaultAccount","defaultGasPrice","gas","gasLimit","defaultGas","EventOptionsMapper","eventFilterEncoder","fromBlock","inputBlockNumberFormatter","defaultBlock","toBlock","unshift","filters","concat","AllEventsOptionsMapper","allEventsFilterEncoder","MethodsProxy","rpcMethodModelFactory","methodController","methodEncoder","rpcMethodOptionsValidator","rpcMethodOptionsMapper","PromiEvent","Proxy","proxyHandler","target","requestType","anonymousFunction","methodArguments","arguments","abiItemModelFound","some","model","error","executeMethod","request","createRpcMethodModel","estimateGas","encodeAbi","rpcMethodModel","handleValidationError","execute","accounts","createRpcMethodByRequestType","parameters","validate","promiEvent","resolve","reject","emit","isFunction","callback","EventSubscriptionsProxy","eventSubscriptionFactory","eventOptionsMapper","eventLogDecoder","allEventsLogDecoder","allEventsOptionsMapper","subscribe","subscribeAll","isUndefined","createEventLogSubscription","createAllEventLogSubscription","errorMessage","RpcMethodOptionsValidator","isToSet","isFromSet","isValueValid","isAddress","value","CallContractMethodModel","CallMethodModel","callMethodResponseDecoder","afterExecution","ContractDeployMethodModel","SendTransactionMethodModel","beforeExecution","moduleInstance","clonedContract","clone","contractAddress","PastEventLogsMethodModel","GetPastLogsMethodModel","formattedLogs","logItem","SendContractMethodModel","logs","log","index","RpcMethodModelFactory","rpcMethod","createCallContractMethodModel","createSendContractMethodModel","createEstimateGasMethodModel","createContractDeployMethodModel","TypeError","createPastEventLogsMethodModel","EstimateGasMethodModel","EventLogSubscription","LogSubscriptionModel","getPastLogsMethodModel","onNewSubscriptionItem","subscription","subscriptionItem","outputLogFormatter","AllEventsLogSubscription","EventSubscriptionFactory","Subscription","AbstractContract","AbstractWeb3Module","provider","providersModuleFactory","providers","contractModuleFactory","Array","abiMapper","createAbiMapper","createRpcMethodModelFactory","createMethodsProxy","createEventSubscriptionsProxy","once","eventName","eventSubscription","on","unsubscribe","getPastEvents","jsonInterface","pastEventLogsMethodModel","deploy","contractConstructor","currentProvider","setProvider","net","transactionBlockTimeout","transactionConfirmationBlocks","transactionPollingTimeout","ContractModuleFactory","createContract","createMethodEncoder","createEventFilterEncoder","createAllEventsFilterEncoder","createCallMethodResponseDecoder","createEventLogDecoder","createAllEventsLogDecoder","createRpcMethodOptionsValidator","createRpcMethodOptionsMapper","createEventOptionsMapper","createAllEventsOptionsMapper","RpcMethodFactory","createEventSubscriptionFactory","Contract","Utils","AbiCoder","Accounts","ProvidersModuleFactory","MethodController"],"mappings":"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"}