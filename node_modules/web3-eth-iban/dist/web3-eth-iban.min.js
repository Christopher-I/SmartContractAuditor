(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Web3EthIban={})})(this,function(e){"use strict";var pe=String.fromCharCode,ae=Math.min,ue=Math.floor,ge=Math.pow;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(){ye=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)he[t]=e[t],ce[e.charCodeAt(t)]=t;ce[45]=62,ce[95]=63}function d(e){ye||s();var t,n,o,r,d,p,a=e.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");d="="===e[a-2]?2:"="===e[a-1]?1:0,p=new me(3*a/4-d),o=0<d?a-4:a;var u=0;for(t=0,n=0;t<o;t+=4,n+=3)r=ce[e.charCodeAt(t)]<<18|ce[e.charCodeAt(t+1)]<<12|ce[e.charCodeAt(t+2)]<<6|ce[e.charCodeAt(t+3)],p[u++]=255&r>>16,p[u++]=255&r>>8,p[u++]=255&r;return 2===d?(r=ce[e.charCodeAt(t)]<<2|ce[e.charCodeAt(t+1)]>>4,p[u++]=255&r):1==d&&(r=ce[e.charCodeAt(t)]<<10|ce[e.charCodeAt(t+1)]<<4|ce[e.charCodeAt(t+2)]>>2,p[u++]=255&r>>8,p[u++]=255&r),p}function l(e){return he[63&e>>18]+he[63&e>>12]+he[63&e>>6]+he[63&e]}function p(e,t,n){for(var o,r=[],s=t;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(l(o));return r.join("")}function a(e){ye||s();for(var t,n=e.length,o=n%3,r="",d=[],l=16383,a=0,u=n-o;a<u;a+=l)d.push(p(e,a,a+l>u?u:a+l));return 1===o?(t=e[n-1],r+=he[t>>2],r+=he[63&t<<4],r+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],r+=he[t>>10],r+=he[63&t>>4],r+=he[63&t<<2],r+="="),d.push(r),d.join("")}function u(t,n,o,r,l){var p,a,u=8*l-r-1,g=(1<<u)-1,f=g>>1,h=-7,c=o?l-1:0,y=o?-1:1,d=t[n+c];for(c+=y,p=d&(1<<-h)-1,d>>=-h,h+=u;0<h;p=256*p+t[n+c],c+=y,h-=8);for(a=p&(1<<-h)-1,p>>=-h,h+=r;0<h;a=256*a+t[n+c],c+=y,h-=8);if(0===p)p=1-f;else{if(p===g)return a?NaN:(d?-1:1)*(1/0);a+=ge(2,r),p-=f}return(d?-1:1)*a*ge(2,p-r)}function g(t,n,o,r,l,p){var f,h,y,a=Math.LN2,u=Math.log,g=Math.abs,w=8*p-l-1,b=(1<<w)-1,v=b>>1,_=23===l?ge(2,-24)-ge(2,-77):0,x=r?0:p-1,A=r?1:-1,d=0>n||0===n&&0>1/n?1:0;for(n=g(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,f=b):(f=ue(u(n)/a),1>n*(y=ge(2,-f))&&(f--,y*=2),n+=1<=f+v?_/y:_*ge(2,1-v),2<=n*y&&(f++,y/=2),f+v>=b?(h=0,f=b):1<=f+v?(h=(n*y-1)*ge(2,l),f+=v):(h=n*ge(2,v-1)*ge(2,l),f=0));8<=l;t[o+x]=255&h,x+=A,h/=256,l-=8);for(f=f<<l|h,w+=l;0<w;t[o+x]=255&f,x+=A,f/=256,w-=8);t[o+x-A]|=128*d}function f(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(e,t){if(f()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return b(this,e)}return m(this,e,t,n)}function m(e,t,n,o){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?x(e,t,n,o):"string"==typeof t?v(e,t,n):A(e,t)}function y(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function w(e,t,n,o){return y(t),0>=t?h(e,t):void 0===n?h(e,t):"string"==typeof o?h(e,t).fill(n,o):h(e,t).fill(n)}function b(e,t){if(y(t),e=h(e,0>t?0:0|S(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function v(e,t,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!c.isEncoding(n))throw new TypeError("\"encoding\" must be a valid string encoding");var o=0|R(t,n);e=h(e,o);var r=e.write(t,n);return r!==o&&(e=e.slice(0,r)),e}function _(e,t){var n=0>t.length?0:0|S(t.length);e=h(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function x(e,t,n,o){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=_(e,t),e}function A(e,t){if(P(t)){var n=0|S(t.length);return(e=h(e,n),0===e.length)?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||ie(t.length)?h(e,0):_(e,t);if("Buffer"===t.type&&be(t.data))return _(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function S(e){if(e>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|e}function P(e){return!!(null!=e&&e._isBuffer)}function R(e,t){if(P(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return ee(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return oe(e).length;default:if(o)return ee(e).length;t=(""+t).toLowerCase(),o=!0;}}function B(e,t,n){var o=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return W(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return Z(this,t,n);case"latin1":case"binary":return q(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0;}}function T(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function E(e,t,n,o,r){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(0>n)if(r)n=0;else return-1;if("string"==typeof t&&(t=c.from(t,o)),P(t))return 0===t.length?-1:k(e,t,n,o,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):k(e,[t],n,o,r);throw new TypeError("val must be string, number or Buffer")}function k(e,t,n,o,r){function s(e,t){return 1===d?e[t]:e.readUInt16BE(t*d)}var d=1,l=e.length,p=t.length;if(void 0!==o&&(o=(o+"").toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(2>e.length||2>t.length)return-1;d=2,l/=2,p/=2,n/=2}var a;if(r){var u=-1;for(a=n;a<l;a++)if(s(e,a)!==s(t,-1===u?0:a-u))-1!==u&&(a-=a-u),u=-1;else if(-1===u&&(u=a),a-u+1===p)return u*d}else for(n+p>l&&(n=l-p),a=n;0<=a;a--){for(var g=!0,f=0;f<p;f++)if(s(e,a+f)!==s(t,f)){g=!1;break}if(g)return a}return-1}function O(e,t,n,o){n=+n||0;var r=e.length-n;o?(o=+o,o>r&&(o=r)):o=r;var s=t.length;if(0!=s%2)throw new TypeError("Invalid hex string");o>s/2&&(o=s/2);for(var d,l=0;l<o;++l){if(d=parseInt(t.substr(2*l,2),16),isNaN(d))return l;e[n+l]=d}return l}function I(e,t,n,o){return re(ee(t,e.length-n),e,n,o)}function U(e,t,n,o){return re(te(t),e,n,o)}function L(e,t,n,o){return U(e,t,n,o)}function Y(e,t,n,o){return re(oe(t),e,n,o)}function j(e,t,n,o){return re(ne(t,e.length-n),e,n,o)}function C(e,t,n){return 0===t&&n===e.length?a(e):a(e.slice(t,n))}function N(e,t,n){n=ae(e.length,n);for(var o=[],r=t;r<n;){var s=e[r],d=null,l=239<s?4:223<s?3:191<s?2:1;if(r+l<=n){var p,a,u,g;1===l?128>s&&(d=s):2===l?(p=e[r+1],128==(192&p)&&(g=(31&s)<<6|63&p,127<g&&(d=g))):3===l?(p=e[r+1],a=e[r+2],128==(192&p)&&128==(192&a)&&(g=(15&s)<<12|(63&p)<<6|63&a,2047<g&&(55296>g||57343<g)&&(d=g))):4===l?(p=e[r+1],a=e[r+2],u=e[r+3],128==(192&p)&&128==(192&a)&&128==(192&u)&&(g=(15&s)<<18|(63&p)<<12|(63&a)<<6|63&u,65535<g&&1114112>g&&(d=g))):void 0}null===d?(d=65533,l=1):65535<d&&(d-=65536,o.push(55296|1023&d>>>10),d=56320|1023&d),o.push(d),r+=l}return D(o)}function D(e){var t=e.length;if(t<=4096)return pe.apply(String,e);for(var n="",o=0;o<t;)n+=pe.apply(String,e.slice(o,o+=4096));return n}function Z(e,t,n){var o="";n=ae(e.length,n);for(var r=t;r<n;++r)o+=pe(127&e[r]);return o}function q(e,t,n){var o="";n=ae(e.length,n);for(var r=t;r<n;++r)o+=pe(e[r]);return o}function W(e,t,n){var o=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>o)&&(n=o);for(var r="",s=t;s<n;++s)r+=Q(e[s]);return r}function z(e,t,n){for(var o=e.slice(t,n),r="",s=0;s<o.length;s+=2)r+=pe(o[s]+256*o[s+1]);return r}function H(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,o,r,i){if(!P(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>r||t<i)throw new RangeError("\"value\" argument is out of bounds");if(n+o>e.length)throw new RangeError("Index out of range")}function F(e,t,n,o){0>t&&(t=65535+t+1);for(var r=0,s=ae(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function X(e,t,n,o){0>t&&(t=4294967295+t+1);for(var r=0,s=ae(e.length-n,4);r<s;++r)e[n+r]=255&t>>>8*(o?r:3-r)}function G(e,t,n,o){if(n+o>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function V(e,t,n,o,r){return r||G(e,t,n,4,34028234663852886e22,-34028234663852886e22),g(e,t,n,o,23,4),n+4}function K(e,t,n,o,r){return r||G(e,t,n,8,17976931348623157e292,-17976931348623157e292),g(e,t,n,o,52,8),n+8}function J(e){if(e=$(e).replace(xe,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function $(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Q(e){return 16>e?"0"+e.toString(16):e.toString(16)}function ee(e,t){t=t||1/0;for(var n,o=e.length,r=null,s=[],d=0;d<o;++d){if(n=e.charCodeAt(d),55295<n&&57344>n){if(!r){if(56319<n){-1<(t-=3)&&s.push(239,191,189);continue}else if(d+1===o){-1<(t-=3)&&s.push(239,191,189);continue}r=n;continue}if(56320>n){-1<(t-=3)&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&-1<(t-=3)&&s.push(239,191,189);if(r=null,128>n){if(0>(t-=1))break;s.push(n)}else if(2048>n){if(0>(t-=2))break;s.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;s.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;s.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return s}function te(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function ne(e,t){for(var n,o,r,s=[],d=0;d<e.length&&!(0>(t-=2));++d)n=e.charCodeAt(d),o=n>>8,r=n%256,s.push(r),s.push(o);return s}function oe(e){return d(J(e))}function re(e,t,n,o){for(var r=0;r<o&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function ie(e){return e!==e}function se(e){return null!=e&&(!!e._isBuffer||de(e)||le(e))}function de(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function le(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&de(e.slice(0,0))}(function(n,o){"object"===("undefined"==typeof e?"undefined":t(e))&&"undefined"!=typeof module?o(e,require("underscore-es/isFunction"),require("underscore-es/isNull"),require("underscore-es/isUndefined"),require("underscore-es/isBoolean"),require("underscore-es/isString"),require("underscore-es/isNumber"),require("number-to-bn"),require("utf8"),require("eth-lib/lib/hash"),require("underscore-es/isArray"),require("underscore-es/isObject"),require("underscore-es/map"),require("bn.js"),require("randomhex")):"function"==typeof define&&define.amd?define(["exports","underscore-es/isFunction","underscore-es/isNull","underscore-es/isUndefined","underscore-es/isBoolean","underscore-es/isString","underscore-es/isNumber","number-to-bn","utf8","eth-lib/lib/hash","underscore-es/isArray","underscore-es/isObject","underscore-es/map","bn.js","randomhex"],o):o(n.Web3Utils={},n.isFunction,n.isNull,n.isUndefined,n.isBoolean,n.isString,n.isNumber,n.numberToBN,n.utf8,n.Hash,n.isArray,n.isObject,n.map,n.BN$1,n.randomhex)})(void 0,function(e,n,o,r,i,s,d,l,p,a,u,g,f,h,c){function m(e){return m="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},m(e)}n=n&&n.hasOwnProperty("default")?n["default"]:n,o=o&&o.hasOwnProperty("default")?o["default"]:o,r=r&&r.hasOwnProperty("default")?r["default"]:r,i=i&&i.hasOwnProperty("default")?i["default"]:i,s=s&&s.hasOwnProperty("default")?s["default"]:s,d=d&&d.hasOwnProperty("default")?d["default"]:d,l=l&&l.hasOwnProperty("default")?l["default"]:l,p=p&&p.hasOwnProperty("default")?p["default"]:p,a=a&&a.hasOwnProperty("default")?a["default"]:a,u=u&&u.hasOwnProperty("default")?u["default"]:u,g=g&&g.hasOwnProperty("default")?g["default"]:g,f=f&&f.hasOwnProperty("default")?f["default"]:f,h=h&&h.hasOwnProperty("default")?h["default"]:h,c=c&&c.hasOwnProperty("default")?c["default"]:c;var y=function(e){return e instanceof BN||e&&e.constructor&&"BN"===e.constructor.name},w=function(e){return e&&e.constructor&&"BigNumber"===e.constructor.name},b=function(e){try{return l(e)}catch(t){throw new Error("".concat(t," Given value: \"").concat(e,"\""))}},v=function(e){return!!/^(0x)?[0-9a-f]{40}$/i.test(e)&&(!!(/^(0x|0X)?[0-9a-f]{40}$/.test(e)||/^(0x|0X)?[0-9A-F]{40}$/.test(e))||_(e))},_=function(e){e=e.replace(/^0x/i,"");for(var t=I(e.toLowerCase()).replace(/^0x/i,""),n=0;40>n;n++)if(7<parseInt(t[n],16)&&e[n].toUpperCase()!==e[n]||7>=parseInt(t[n],16)&&e[n].toLowerCase()!==e[n])return!1;return!0},x=function(e,t,n){var o=/^0x/i.test(e)||"number"==typeof e;e=e.toString(16).replace(/^0x/i,"");var r=0<=t-e.length+1?t-e.length+1:0;return(o?"0x":"")+Array(r).join(n||"0")+e},A=function(e,t,n){var o=/^0x/i.test(e)||"number"==typeof e;e=e.toString(16).replace(/^0x/i,"");var r=0<=t-e.length+1?t-e.length+1:0;return(o?"0x":"")+e+Array(r).join(n||"0")},S=function(e){e=p.encode(e);var t="";e=e.replace(/^(?:\u0000)*/,""),e=e.split("").reverse().join(""),e=e.replace(/^(?:\u0000)*/,""),e=e.split("").reverse().join("");for(var o=0;o<e.length;o++){var r=e.charCodeAt(o),s=r.toString(16);t+=2>s.length?"0".concat(s):s}return"0x".concat(t)},P=function(e){if(!k(e))throw new Error("The parameter \"".concat(e,"\" must be a valid HEX string."));var t="",n=0;e=e.replace(/^0x/i,""),e=e.replace(/^(?:00)*/,""),e=e.split("").reverse().join(""),e=e.replace(/^(?:00)*/,""),e=e.split("").reverse().join("");for(var o=e.length,r=0;r<o;r+=2)n=parseInt(e.substr(r,2),16),t+=pe(n);return p.decode(t)},R=function(e){return e?b(e).toNumber():e},B=function(e){if(o(e)||r(e))return e;if(!isFinite(e)&&!k(e))throw new Error("Given input \"".concat(e,"\" is not a number."));var t=b(e),n=t.toString(16);return t.lt(new BN(0))?"-0x".concat(n.substr(1)):"0x".concat(n)},T=function(e){if(e=e.toString(16),!k(e))throw new Error("Given value \"".concat(e,"\" is not a valid hex string."));e=e.replace(/^0x/i,"");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},E=function(e,t){if(v(e))return t?"address":"0x".concat(e.toLowerCase().replace(/^0x/i,""));if(i(e))return t?"bool":e?"0x01":"0x00";if(g(e)&&!w(e)&&!y(e))return t?"string":S(JSON.stringify(e));if(s(e)){if(0===e.indexOf("-0x")||0===e.indexOf("-0X"))return t?"int256":B(e);if(0===e.indexOf("0x")||0===e.indexOf("0X"))return t?"bytes":e;if(!isFinite(e))return t?"string":S(e)}return t?0>e?"int256":"uint256":B(e)},k=function(e){return(s(e)||d(e))&&/^(-)?0x[0-9a-f]*$/i.test(e)},O=function(e){return(s(e)||d(e))&&/^(-0x|0x)?[0-9a-f]*$/i.test(e)},I=function(e){k(e)&&/^0x/i.test(e.toString())&&(e=T(e));var t=a.keccak256(e);return t==="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"?null:t};I._Hash=a;var U=function(e){return e.startsWith("int[")?"int256".concat(e.slice(3)):"int"===e?"int256":e.startsWith("uint[")?"uint256".concat(e.slice(4)):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128".concat(e.slice(5)):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128".concat(e.slice(6)):"ufixed"===e?"ufixed128x128":e},L=function(e){var t=/^\D+(\d+).*$/.exec(e);return t?parseInt(t[1],10):null},Y=function(e){var t=/^\D+\d*\[(\d+)\]$/.exec(e);return t?parseInt(t[1],10):null},j=function(e){var t=m(e);if("string"===t)return k(e)?new h(e.replace(/0x/i,""),16):new h(e,10);if("number"===t)return new h(e);if(w(e))return new h(e.toString(10));if(y(e))return e;throw new Error("".concat(e," is not a number"))},C=function(e,t,n){var o,r;if(e=U(e),"bytes"===e){if(0!=t.replace(/^0x/i,"").length%2)throw new Error("Invalid bytes characters ".concat(t.length));return t}if("string"===e)return S(t);if("bool"===e)return t?"01":"00";if(e.startsWith("address")){if(o=n?64:40,!v(t))throw new Error("".concat(t," is not a valid address, or the checksum is invalid."));return x(t.toLowerCase(),o)}if(o=L(e),e.startsWith("bytes")){if(!o)throw new Error("bytes[] not yet supported in solidity");if(n&&(o=32),1>o||32<o||o<t.replace(/^0x/i,"").length/2)throw new Error("Invalid bytes".concat(o," for ").concat(t));return A(t,2*o)}if(e.startsWith("uint")){if(o%8||8>o||256<o)throw new Error("Invalid uint".concat(o," size"));if(r=j(t),r.bitLength()>o)throw new Error("Supplied uint exceeds width: ".concat(o," vs ").concat(r.bitLength()));if(r.lt(new h(0)))throw new Error("Supplied uint ".concat(r.toString()," is negative"));return o?x(r.toString("hex"),2*(o/8)):r}if(e.startsWith("int")){if(o%8||8>o||256<o)throw new Error("Invalid int".concat(o," size"));if(r=j(t),r.bitLength()>o)throw new Error("Supplied int exceeds width: ".concat(o," vs ").concat(r.bitLength()));return r.lt(new h(0))?r.toTwos(o).toString("hex"):o?x(r.toString("hex"),2*(o/8)):r}throw new Error("Unsupported or invalid type: ".concat(e))},N=function(e){if(u(e))throw new Error("Autodetection of array types is not supported.");var t,n,o,r="";if(g(e)&&(e.hasOwnProperty("v")||e.hasOwnProperty("t")||e.hasOwnProperty("value")||e.hasOwnProperty("type"))?(t=e.hasOwnProperty("t")?e.t:e.type,r=e.hasOwnProperty("v")?e.v:e.value):(t=E(e,!0),r=E(e),!t.startsWith("int")&&!t.startsWith("uint")&&(t="bytes")),(t.startsWith("int")||t.startsWith("uint"))&&"string"==typeof r&&!/^(-)?0x/i.test(r)&&(r=new h(r)),u(r))if(o=Y(t),o&&r.length!==o)throw new Error("".concat(t," is not matching the given array ").concat(JSON.stringify(r)));else o=r.length;return u(r)?(n=r.map(function(e){return C(t,e,o).toString("hex").replace("0x","")}),n.join("")):(n=C(t,r,o),n.toString("hex").replace("0x",""))},D=function(){var e=Array.prototype.slice.call(arguments),t=f(e,N);return I("0x".concat(t.join("")))},Z={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"},q=function(e,t,o,r){return g(e)&&!(e instanceof Error)&&e.data&&((g(e.data)||u(e.data))&&(e.data=JSON.stringify(e.data,null,2)),e="".concat(e.message,"\n").concat(e.data)),s(e)&&(e=new Error(e)),n(r)&&r(e),n(o)&&((t&&n(t.listeners)&&0<t.listeners("error").length||n(r))&&t.catch(function(){}),setTimeout(function(){o(e)},1)),t&&n(t.emit)&&setTimeout(function(){t.emit("error",e),t.removeAllListeners()},1),t},W=function(e){return g(e)&&e.name&&-1!==e.name.indexOf("(")?e.name:"".concat(e.name,"(").concat(z(!1,e.inputs).join(","),")")},z=function e(t,n){var o=[];return n.forEach(function(n){if("object"===m(n.components)){if("tuple"!==n.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var r="",i=n.type.indexOf("[");0<=i&&(r=n.type.substring(i));var s=e(t,n.components);u(s)&&t?o.push("tuple(".concat(s.join(","),")").concat(r)):t?o.push("(".concat(s,")")):o.push("(".concat(s.join(","),")").concat(r))}else o.push(n.type)}),o},H=function(e){if(!k(e))throw new Error("The parameter must be a valid HEX string.");var t="",n=0,o=e.length;for("0x"===e.substring(0,2)&&(n=2);n<o;n+=2){var r=parseInt(e.substr(n,2),16);t+=pe(r)}return t},M=function(e){if(!e)return"0x00";for(var t="",o=0;o<e.length;o++){var r=e.charCodeAt(o),s=r.toString(16);t+=2>s.length?"0".concat(s):s}return"0x".concat(t)},F=function(e){if(e=e?e.toLowerCase():"ether",!Z[e])throw new Error("This unit \"".concat(e,"\" doesn't exist, please use the one of the following units").concat(JSON.stringify(Z,null,2)));return e},X=function(e,t){if(t=F(t),!y(e)&&!s(e))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return y(e)?ethjsUnit.fromWei(e,t):ethjsUnit.fromWei(e,t).toString(10)},G=function(e,t){if(t=F(t),!y(e)&&!s(e))throw new Error("Please pass numbers as strings or BigNumber objects to avoid precision errors.");return y(e)?ethjsUnit.toWei(e,t):ethjsUnit.toWei(e,t).toString(10)};e.randomHex=c,e.unitMap=Z,e._fireError=q,e._jsonInterfaceMethodToString=W,e._flattenTypes=z,e.hexToAscii=H,e.asciiToHex=M,e.getUnitValue=F,e.fromWei=X,e.toWei=G,e.toChecksumAddress=function(e){if("undefined"==typeof e)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(e))throw new Error("Given address \"".concat(e,"\" is not a valid Ethereum address."));e=e.toLowerCase().replace(/^0x/i,"");for(var t=I(e).replace(/^0x/i,""),n="0x",o=0;o<e.length;o++)n+=7<parseInt(t[o],16)?e[o].toUpperCase():e[o];return n},e.keccak256=I,e.toDecimal=R,e.fromDecimal=B,e.hexToString=P,e.toUtf8=P,e.stringToHex=S,e.fromUtf8=S,e.toAscii=H,e.fromAscii=M,e.padLeft=x,e.padRight=A,e.soliditySha3=D,e.isBN=y,e.isBigNumber=w,e.toBN=b,e.toTwosComplement=function(e){return"0x".concat(b(e).toTwos(256).toString(16,64))},e.isAddress=v,e.checkAddressChecksum=_,e.leftPad=x,e.rightPad=A,e.utf8ToHex=S,e.hexToUtf8=P,e.hexToNumber=R,e.hexToNumberString=function(e){return e?b(e).toString(10):e},e.numberToHex=B,e.bytesToHex=function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return"0x".concat(t.join(""))},e.hexToBytes=T,e.toHex=E,e.isHexStrict=k,e.isHex=O,e.isBloom=function(e){if(!/^(0x)?[0-9a-f]{512}$/i.test(e))return!1;return!!(/^(0x)?[0-9a-f]{512}$/.test(e)||/^(0x)?[0-9A-F]{512}$/.test(e))},e.isTopic=function(e){if(!/^(0x)?[0-9a-f]{64}$/i.test(e))return!1;return!!(/^(0x)?[0-9a-f]{64}$/.test(e)||/^(0x)?[0-9A-F]{64}$/.test(e))},e.sha3=I,Object.defineProperty(e,"__esModule",{value:!0})});var fe="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,he=[],ce=[],me="undefined"==typeof Uint8Array?Array:Uint8Array,ye=!1,we={}.toString,be=Array.isArray||function(e){return"[object Array]"==we.call(e)},ve=50;c.TYPED_ARRAY_SUPPORT=!(global.TYPED_ARRAY_SUPPORT!==void 0)||global.TYPED_ARRAY_SUPPORT;var _e=f();c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return m(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array),c.alloc=function(e,t,n){return w(null,e,t,n)},c.allocUnsafe=function(e){return b(null,e)},c.allocUnsafeSlow=function(e){return b(null,e)},c.isBuffer=se,c.compare=function(e,t){if(!P(e)||!P(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,r=0,s=ae(n,o);r<s;++r)if(e[r]!==t[r]){n=e[r],o=t[r];break}return n<o?-1:o<n?1:0},c.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},c.concat=function(e,t){if(!be(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return c.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!P(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(o,r),r+=s.length}return o},c.byteLength=R,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?N(this,0,e):B.apply(this,arguments)},c.prototype.equals=function(e){if(!P(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=ve;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,o,r){if(!P(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),0>t||n>e.length||0>o||r>this.length)throw new RangeError("out of range index");if(o>=r&&t>=n)return 0;if(o>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,o>>>=0,r>>>=0,this===e)return 0;for(var s=r-o,d=n-t,l=ae(s,d),p=this.slice(o,r),a=e.slice(t,n),u=0;u<l;++u)if(p[u]!==a[u]){s=p[u],d=a[u];break}return s<d?-1:d<s?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},c.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((void 0===n||n>r)&&(n=r),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return O(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return U(this,e,t,n);case"latin1":case"binary":return L(this,e,t,n);case"base64":return Y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0;}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};c.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var o;if(c.TYPED_ARRAY_SUPPORT)o=this.subarray(e,t),o.__proto__=c.prototype;else{var r=t-e;o=new c(r,void 0);for(var s=0;s<r;++s)o[s]=this[s+e]}return o},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||H(e,t,this.length);for(var o=this[e],r=1,s=0;++s<t&&(r*=256);)o+=this[e+s]*r;return o},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||H(e,t,this.length);for(var o=this[e+--t],r=1;0<t&&(r*=256);)o+=this[e+--t]*r;return o},c.prototype.readUInt8=function(e,t){return t||H(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||H(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||H(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||H(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||H(e,t,this.length);for(var o=this[e],r=1,s=0;++s<t&&(r*=256);)o+=this[e+s]*r;return r*=128,o>=r&&(o-=ge(2,8*t)),o},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||H(e,t,this.length);for(var o=t,r=1,s=this[e+--o];0<o&&(r*=256);)s+=this[e+--o]*r;return r*=128,s>=r&&(s-=ge(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||H(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||H(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||H(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||H(e,4,this.length),u(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||H(e,4,this.length),u(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||H(e,8,this.length),u(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||H(e,8,this.length),u(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var r=ge(2,8*n)-1;M(this,e,t,n,r,0)}var s=1,d=0;for(this[t]=255&e;++d<n&&(s*=256);)this[t+d]=255&e/s;return t+n},c.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t|=0,n|=0,!o){var r=ge(2,8*n)-1;M(this,e,t,n,r,0)}var s=n-1,d=1;for(this[t+s]=255&e;0<=--s&&(d*=256);)this[t+s]=255&e/d;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=ue(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):X(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=ge(2,8*n-1);M(this,e,t,n,r-1,-r)}var s=0,d=1,l=0;for(this[t]=255&e;++s<n&&(d*=256);)0>e&&0===l&&0!==this[t+s-1]&&(l=1),this[t+s]=255&(e/d>>0)-l;return t+n},c.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=ge(2,8*n-1);M(this,e,t,n,r-1,-r)}var s=n-1,d=1,l=0;for(this[t+s]=255&e;0<=--s&&(d*=256);)0>e&&0===l&&0!==this[t+s+1]&&(l=1),this[t+s]=255&(e/d>>0)-l;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=ue(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):X(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):X(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return K(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return K(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),0<o&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var r,s=o-n;if(this===e&&n<t&&t<o)for(r=s-1;0<=r;--r)e[r+t]=this[r+n];else if(1e3>s||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},c.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var d=P(e)?e:ee(new c(e,o).toString()),l=d.length;for(s=0;s<n-t;++s)this[s+t]=d[s%l]}return this};var xe=/[^+\/0-9A-Za-z-_]/g,Ae=Object.freeze({INSPECT_MAX_BYTES:ve,kMaxLength:_e,Buffer:c,SlowBuffer:function(e){return+e!=e&&(e=0),c.alloc(+e)},isBuffer:se}),Se=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(e,t){var v=Math.imul,_=Math.clz32,x=Math.ceil,A=Math.max;function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function d(e,t,n){return d.isBN(e)?e:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(e||0,t||10,n||"be")))}function r(e,t,n){for(var o,s=0,d=ae(e.length,n),l=t;l<d;l++)o=e.charCodeAt(l)-48,s<<=4,s|=49<=o&&54>=o?o-49+10:17<=o&&22>=o?o-17+10:15&o;return s}function s(e,t,n,o){for(var s,d=0,l=ae(e.length,n),p=t;p<l;p++)s=e.charCodeAt(p)-48,d*=o,d+=49<=s?s-49+10:17<=s?s-17+10:s;return d}function l(e){for(var t=Array(e.bitLength()),n=0;n<t.length;n++){var o=0|n/26,r=n%26;t[n]=(e.words[o]&1<<r)>>>r}return t}function p(e,t,n){n.negative=t.negative^e.negative;var o=0|e.length+t.length;n.length=o,o=0|o-1;var s=0|e.words[0],d=0|t.words[0],l=s*d,p=67108863&l,u=0|l/67108864;n.words[0]=p;for(var g=1;g<o;g++){for(var f,h=u>>>26,c=67108863&u,m=ae(g,t.length-1),y=A(0,g-e.length+1);y<=m;y++)f=0|g-y,s=0|e.words[f],d=0|t.words[y],l=s*d+c,h+=0|l/67108864,c=67108863&l;n.words[g]=0|c,u=0|h}return 0===u?n.length--:n.words[g]=0|u,n.strip()}function a(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var o,s=0,d=0,l=0;l<n.length-1;l++){o=d,d=0;for(var p=67108863&s,u=ae(l,t.length-1),g=A(0,l-e.length+1);g<=u;g++){var f=l-g,i=0|e.words[f],a=0|t.words[g],h=i*a,r=67108863&h;o=0|o+(0|h/67108864),r=0|r+p,p=67108863&r,o=0|o+(r>>>26),d+=o>>>26,o&=67108863}n.words[l]=p,s=o,o=d}return 0===s?n.length--:n.words[l]=s,n.strip()}function u(e,t,n){var o=new g;return o.mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}function f(e,t){this.name=e,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function h(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=d._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function b(e){w.call(this,e),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof e?e.exports=d:t.BN=d,d.BN=d,d.wordSize=26;var S;try{S=Ae.Buffer}catch(t){}d.isBN=function(e){return!!(e instanceof d)||null!==e&&"object"==typeof e&&e.constructor.wordSize===d.wordSize&&Array.isArray(e.words)},d.max=function(e,t){return 0<e.cmp(t)?e:t},d.min=function(e,t){return 0>e.cmp(t)?e:t},d.prototype._init=function(e,t,o){if("number"==typeof e)return this._initNumber(e,t,o);if("object"==typeof e)return this._initArray(e,t,o);"hex"===t&&(t=16),n(t===(0|t)&&2<=t&&36>=t),e=e.toString().replace(/\s+/g,"");var r=0;"-"===e[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this.strip();"le"!==o||this._initArray(this.toArray(),t,o)},d.prototype._initNumber=function(e,t,o){0>e&&(this.negative=1,e=-e),67108864>e?(this.words=[67108863&e],this.length=1):4503599627370496>e?(this.words=[67108863&e,67108863&e/67108864],this.length=2):(n(9007199254740992>e),this.words=[67108863&e,67108863&e/67108864,1],this.length=3);"le"!==o||this._initArray(this.toArray(),t,o)},d.prototype._initArray=function(e,t,o){if(n("number"==typeof e.length),0>=e.length)return this.words=[0],this.length=1,this;this.length=x(e.length/3),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,d,l=0;if("be"===o)for(r=e.length-1,s=0;0<=r;r-=3)d=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[s]|=67108863&d<<l,this.words[s+1]=67108863&d>>>26-l,l+=24,26<=l&&(l-=26,s++);else if("le"===o)for(r=0,s=0;r<e.length;r+=3)d=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[s]|=67108863&d<<l,this.words[s+1]=67108863&d>>>26-l,l+=24,26<=l&&(l-=26,s++);return this.strip()},d.prototype._parseHex=function(e,t){this.length=x((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,d=0;for(n=e.length-6,o=0;n>=t;n-=6)s=r(e,n,n+6),this.words[o]|=67108863&s<<d,this.words[o+1]|=4194303&s>>>26-d,d+=24,26<=d&&(d-=26,o++);n+6!==t&&(s=r(e,t,n+6),this.words[o]|=67108863&s<<d,this.words[o+1]|=4194303&s>>>26-d),this.strip()},d.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var o=0,r=1;67108863>=r;r*=t)o++;o--,r=0|r/t;for(var d=e.length-n,l=d%o,p=ae(d,d-l)+n,a=0,u=n;u<p;u+=o)a=s(e,u,u+o,t),this.imuln(r),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a);if(0!==l){var g=1;for(a=s(e,u,e.length,t),u=0;u<l;u++)g*=t;this.imuln(g),67108864>this.words[0]+a?this.words[0]+=a:this._iaddn(a)}},d.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},d.prototype.clone=function(){var e=new d(null);return this.copy(e),e},d.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(e,t){e=e||10,t=0|t||1;var o;if(16===e||"hex"===e){o="";for(var s=0,d=0,l=0;l<this.length;l++){var p=this.words[l],a=(16777215&(p<<s|d)).toString(16);d=16777215&p>>>24-s,o=0!==d||l!=this.length-1?P[6-a.length]+a+o:a+o,s+=2,26<=s&&(s-=26,l--)}for(0!==d&&(o=d.toString(16)+o);0!=o.length%t;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}if(e===(0|e)&&2<=e&&36>=e){var u=R[e],g=B[e];o="";var f=this.clone();for(f.negative=0;!f.isZero();){var h=f.modn(g).toString(e);f=f.idivn(g),o=f.isZero()?h+o:P[u-h.length]+h+o}for(this.isZero()&&(o="0"+o);0!=o.length%t;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}n(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:2<this.length&&n(!1,"Number can only safely store up to 53 bits"),0===this.negative?e:-e},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(e,t){return n("undefined"!=typeof S),this.toArrayLike(S,e,t)},d.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},d.prototype.toArrayLike=function(e,t,o){var r=this.byteLength(),s=o||A(1,r);n(r<=s,"byte array longer than desired length"),n(0<s,"Requested array length <= 0"),this.strip();var d,l,p=new e(s),a=this.clone();if(!("le"===t)){for(l=0;l<s-r;l++)p[l]=0;for(l=0;!a.isZero();l++)d=a.andln(255),a.iushrn(8),p[s-l-1]=d}else{for(l=0;!a.isZero();l++)d=a.andln(255),a.iushrn(8),p[l]=d;for(;l<s;l++)p[l]=0}return p},d.prototype._countBits=_?function(e){return 32-_(e)}:function(e){var n=e,o=0;return 4096<=n&&(o+=13,n>>>=13),64<=n&&(o+=7,n>>>=7),8<=n&&(o+=4,n>>>=4),2<=n&&(o+=2,n>>>=2),o+n},d.prototype._zeroBits=function(e){if(0===e)return 26;var n=e,o=0;return 0==(8191&n)&&(o+=13,n>>>=13),0==(127&n)&&(o+=7,n>>>=7),0==(15&n)&&(o+=4,n>>>=4),0==(3&n)&&(o+=2,n>>>=2),0==(1&n)&&o++,o},d.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e,t=0,n=0;n<this.length&&(e=this._zeroBits(this.words[n]),t+=e,26===e);n++);return t},d.prototype.byteLength=function(){return x(this.bitLength()/8)},d.prototype.toTwos=function(e){return 0===this.negative?this.clone():this.abs().inotn(e).iaddn(1)},d.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return 0!==this.negative},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]|=e.words[t];return this.strip()},d.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},d.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},d.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},d.prototype.iuand=function(e){var t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]&=e.words[n];return this.length=t.length,this.strip()},d.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},d.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},d.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},d.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var o=0;o<n.length;o++)this.words[o]=t.words[o]^n.words[o];if(this!==t)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=t.length,this.strip()},d.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},d.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},d.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},d.prototype.inotn=function(e){n("number"==typeof e&&0<=e);var t=0|x(e/26),o=e%26;this._expand(t),0<o&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return 0<o&&(this.words[r]=~this.words[r]&67108863>>26-o),this.strip()},d.prototype.notn=function(e){return this.clone().inotn(e)},d.prototype.setn=function(e,t){n("number"==typeof e&&0<=e);var o=0|e/26,r=e%26;return this._expand(o+1),t?this.words[o]|=1<<r:this.words[o]&=~(1<<r),this.strip()},d.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,o;this.length>e.length?(n=this,o=e):(n=e,o=this);for(var s=0,d=0;d<o.length;d++)t=(0|n.words[d])+(0|o.words[d])+s,this.words[d]=67108863&t,s=t>>>26;for(;0!==s&&d<n.length;d++)t=(0|n.words[d])+s,this.words[d]=67108863&t,s=t>>>26;if(this.length=n.length,0!==s)this.words[this.length]=s,this.length++;else if(n!==this)for(;d<n.length;d++)this.words[d]=n.words[d];return this},d.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},d.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var o,s;0<n?(o=this,s=e):(o=e,s=this);for(var d=0,l=0;l<s.length;l++)t=(0|o.words[l])-(0|s.words[l])+d,d=t>>26,this.words[l]=67108863&t;for(;0!==d&&l<o.length;l++)t=(0|o.words[l])+d,d=t>>26,this.words[l]=67108863&t;if(0===d&&l<o.length&&o!==this)for(;l<o.length;l++)this.words[l]=o.words[l];return this.length=A(this.length,l),o!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(e){return this.clone().isub(e)};var T=function(e,t,n){var r,i,s,d=e.words,l=t.words,p=n.words,o=0,a=0|d[0],u=8191&a,g=a>>>13,f=0|d[1],h=8191&f,m=f>>>13,y=0|d[2],w=8191&y,b=y>>>13,_=0|d[3],x=8191&_,A=_>>>13,S=0|d[4],P=8191&S,R=S>>>13,B=0|d[5],T=8191&B,E=B>>>13,k=0|d[6],O=8191&k,I=k>>>13,U=0|d[7],L=8191&U,Y=U>>>13,j=0|d[8],C=8191&j,N=j>>>13,D=0|d[9],Z=8191&D,q=D>>>13,W=0|l[0],z=8191&W,H=W>>>13,M=0|l[1],F=8191&M,X=M>>>13,G=0|l[2],V=8191&G,K=G>>>13,J=0|l[3],$=8191&J,Q=J>>>13,ee=0|l[4],te=8191&ee,ne=ee>>>13,oe=0|l[5],re=8191&oe,ie=oe>>>13,se=0|l[6],de=8191&se,le=se>>>13,pe=0|l[7],ae=8191&pe,ue=pe>>>13,ge=0|l[8],fe=8191&ge,he=ge>>>13,ce=0|l[9],me=8191&ce,ye=ce>>>13;n.negative=e.negative^t.negative,n.length=19,r=v(u,z),i=v(u,H),i=0|i+v(g,z),s=v(g,H);var we=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(we>>>26),we&=67108863,r=v(h,z),i=v(h,H),i=0|i+v(m,z),s=v(m,H),r=0|r+v(u,F),i=0|i+v(u,X),i=0|i+v(g,F),s=0|s+v(g,X);var be=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(be>>>26),be&=67108863,r=v(w,z),i=v(w,H),i=0|i+v(b,z),s=v(b,H),r=0|r+v(h,F),i=0|i+v(h,X),i=0|i+v(m,F),s=0|s+v(m,X),r=0|r+v(u,V),i=0|i+v(u,K),i=0|i+v(g,V),s=0|s+v(g,K);var ve=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(ve>>>26),ve&=67108863,r=v(x,z),i=v(x,H),i=0|i+v(A,z),s=v(A,H),r=0|r+v(w,F),i=0|i+v(w,X),i=0|i+v(b,F),s=0|s+v(b,X),r=0|r+v(h,V),i=0|i+v(h,K),i=0|i+v(m,V),s=0|s+v(m,K),r=0|r+v(u,$),i=0|i+v(u,Q),i=0|i+v(g,$),s=0|s+v(g,Q);var _e=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(_e>>>26),_e&=67108863,r=v(P,z),i=v(P,H),i=0|i+v(R,z),s=v(R,H),r=0|r+v(x,F),i=0|i+v(x,X),i=0|i+v(A,F),s=0|s+v(A,X),r=0|r+v(w,V),i=0|i+v(w,K),i=0|i+v(b,V),s=0|s+v(b,K),r=0|r+v(h,$),i=0|i+v(h,Q),i=0|i+v(m,$),s=0|s+v(m,Q),r=0|r+v(u,te),i=0|i+v(u,ne),i=0|i+v(g,te),s=0|s+v(g,ne);var xe=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(xe>>>26),xe&=67108863,r=v(T,z),i=v(T,H),i=0|i+v(E,z),s=v(E,H),r=0|r+v(P,F),i=0|i+v(P,X),i=0|i+v(R,F),s=0|s+v(R,X),r=0|r+v(x,V),i=0|i+v(x,K),i=0|i+v(A,V),s=0|s+v(A,K),r=0|r+v(w,$),i=0|i+v(w,Q),i=0|i+v(b,$),s=0|s+v(b,Q),r=0|r+v(h,te),i=0|i+v(h,ne),i=0|i+v(m,te),s=0|s+v(m,ne),r=0|r+v(u,re),i=0|i+v(u,ie),i=0|i+v(g,re),s=0|s+v(g,ie);var Ae=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Ae>>>26),Ae&=67108863,r=v(O,z),i=v(O,H),i=0|i+v(I,z),s=v(I,H),r=0|r+v(T,F),i=0|i+v(T,X),i=0|i+v(E,F),s=0|s+v(E,X),r=0|r+v(P,V),i=0|i+v(P,K),i=0|i+v(R,V),s=0|s+v(R,K),r=0|r+v(x,$),i=0|i+v(x,Q),i=0|i+v(A,$),s=0|s+v(A,Q),r=0|r+v(w,te),i=0|i+v(w,ne),i=0|i+v(b,te),s=0|s+v(b,ne),r=0|r+v(h,re),i=0|i+v(h,ie),i=0|i+v(m,re),s=0|s+v(m,ie),r=0|r+v(u,de),i=0|i+v(u,le),i=0|i+v(g,de),s=0|s+v(g,le);var Se=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Se>>>26),Se&=67108863,r=v(L,z),i=v(L,H),i=0|i+v(Y,z),s=v(Y,H),r=0|r+v(O,F),i=0|i+v(O,X),i=0|i+v(I,F),s=0|s+v(I,X),r=0|r+v(T,V),i=0|i+v(T,K),i=0|i+v(E,V),s=0|s+v(E,K),r=0|r+v(P,$),i=0|i+v(P,Q),i=0|i+v(R,$),s=0|s+v(R,Q),r=0|r+v(x,te),i=0|i+v(x,ne),i=0|i+v(A,te),s=0|s+v(A,ne),r=0|r+v(w,re),i=0|i+v(w,ie),i=0|i+v(b,re),s=0|s+v(b,ie),r=0|r+v(h,de),i=0|i+v(h,le),i=0|i+v(m,de),s=0|s+v(m,le),r=0|r+v(u,ae),i=0|i+v(u,ue),i=0|i+v(g,ae),s=0|s+v(g,ue);var Pe=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Pe>>>26),Pe&=67108863,r=v(C,z),i=v(C,H),i=0|i+v(N,z),s=v(N,H),r=0|r+v(L,F),i=0|i+v(L,X),i=0|i+v(Y,F),s=0|s+v(Y,X),r=0|r+v(O,V),i=0|i+v(O,K),i=0|i+v(I,V),s=0|s+v(I,K),r=0|r+v(T,$),i=0|i+v(T,Q),i=0|i+v(E,$),s=0|s+v(E,Q),r=0|r+v(P,te),i=0|i+v(P,ne),i=0|i+v(R,te),s=0|s+v(R,ne),r=0|r+v(x,re),i=0|i+v(x,ie),i=0|i+v(A,re),s=0|s+v(A,ie),r=0|r+v(w,de),i=0|i+v(w,le),i=0|i+v(b,de),s=0|s+v(b,le),r=0|r+v(h,ae),i=0|i+v(h,ue),i=0|i+v(m,ae),s=0|s+v(m,ue),r=0|r+v(u,fe),i=0|i+v(u,he),i=0|i+v(g,fe),s=0|s+v(g,he);var Re=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Re>>>26),Re&=67108863,r=v(Z,z),i=v(Z,H),i=0|i+v(q,z),s=v(q,H),r=0|r+v(C,F),i=0|i+v(C,X),i=0|i+v(N,F),s=0|s+v(N,X),r=0|r+v(L,V),i=0|i+v(L,K),i=0|i+v(Y,V),s=0|s+v(Y,K),r=0|r+v(O,$),i=0|i+v(O,Q),i=0|i+v(I,$),s=0|s+v(I,Q),r=0|r+v(T,te),i=0|i+v(T,ne),i=0|i+v(E,te),s=0|s+v(E,ne),r=0|r+v(P,re),i=0|i+v(P,ie),i=0|i+v(R,re),s=0|s+v(R,ie),r=0|r+v(x,de),i=0|i+v(x,le),i=0|i+v(A,de),s=0|s+v(A,le),r=0|r+v(w,ae),i=0|i+v(w,ue),i=0|i+v(b,ae),s=0|s+v(b,ue),r=0|r+v(h,fe),i=0|i+v(h,he),i=0|i+v(m,fe),s=0|s+v(m,he),r=0|r+v(u,me),i=0|i+v(u,ye),i=0|i+v(g,me),s=0|s+v(g,ye);var Be=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Be>>>26),Be&=67108863,r=v(Z,F),i=v(Z,X),i=0|i+v(q,F),s=v(q,X),r=0|r+v(C,V),i=0|i+v(C,K),i=0|i+v(N,V),s=0|s+v(N,K),r=0|r+v(L,$),i=0|i+v(L,Q),i=0|i+v(Y,$),s=0|s+v(Y,Q),r=0|r+v(O,te),i=0|i+v(O,ne),i=0|i+v(I,te),s=0|s+v(I,ne),r=0|r+v(T,re),i=0|i+v(T,ie),i=0|i+v(E,re),s=0|s+v(E,ie),r=0|r+v(P,de),i=0|i+v(P,le),i=0|i+v(R,de),s=0|s+v(R,le),r=0|r+v(x,ae),i=0|i+v(x,ue),i=0|i+v(A,ae),s=0|s+v(A,ue),r=0|r+v(w,fe),i=0|i+v(w,he),i=0|i+v(b,fe),s=0|s+v(b,he),r=0|r+v(h,me),i=0|i+v(h,ye),i=0|i+v(m,me),s=0|s+v(m,ye);var Te=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Te>>>26),Te&=67108863,r=v(Z,V),i=v(Z,K),i=0|i+v(q,V),s=v(q,K),r=0|r+v(C,$),i=0|i+v(C,Q),i=0|i+v(N,$),s=0|s+v(N,Q),r=0|r+v(L,te),i=0|i+v(L,ne),i=0|i+v(Y,te),s=0|s+v(Y,ne),r=0|r+v(O,re),i=0|i+v(O,ie),i=0|i+v(I,re),s=0|s+v(I,ie),r=0|r+v(T,de),i=0|i+v(T,le),i=0|i+v(E,de),s=0|s+v(E,le),r=0|r+v(P,ae),i=0|i+v(P,ue),i=0|i+v(R,ae),s=0|s+v(R,ue),r=0|r+v(x,fe),i=0|i+v(x,he),i=0|i+v(A,fe),s=0|s+v(A,he),r=0|r+v(w,me),i=0|i+v(w,ye),i=0|i+v(b,me),s=0|s+v(b,ye);var Ee=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Ee>>>26),Ee&=67108863,r=v(Z,$),i=v(Z,Q),i=0|i+v(q,$),s=v(q,Q),r=0|r+v(C,te),i=0|i+v(C,ne),i=0|i+v(N,te),s=0|s+v(N,ne),r=0|r+v(L,re),i=0|i+v(L,ie),i=0|i+v(Y,re),s=0|s+v(Y,ie),r=0|r+v(O,de),i=0|i+v(O,le),i=0|i+v(I,de),s=0|s+v(I,le),r=0|r+v(T,ae),i=0|i+v(T,ue),i=0|i+v(E,ae),s=0|s+v(E,ue),r=0|r+v(P,fe),i=0|i+v(P,he),i=0|i+v(R,fe),s=0|s+v(R,he),r=0|r+v(x,me),i=0|i+v(x,ye),i=0|i+v(A,me),s=0|s+v(A,ye);var ke=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(ke>>>26),ke&=67108863,r=v(Z,te),i=v(Z,ne),i=0|i+v(q,te),s=v(q,ne),r=0|r+v(C,re),i=0|i+v(C,ie),i=0|i+v(N,re),s=0|s+v(N,ie),r=0|r+v(L,de),i=0|i+v(L,le),i=0|i+v(Y,de),s=0|s+v(Y,le),r=0|r+v(O,ae),i=0|i+v(O,ue),i=0|i+v(I,ae),s=0|s+v(I,ue),r=0|r+v(T,fe),i=0|i+v(T,he),i=0|i+v(E,fe),s=0|s+v(E,he),r=0|r+v(P,me),i=0|i+v(P,ye),i=0|i+v(R,me),s=0|s+v(R,ye);var Oe=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Oe>>>26),Oe&=67108863,r=v(Z,re),i=v(Z,ie),i=0|i+v(q,re),s=v(q,ie),r=0|r+v(C,de),i=0|i+v(C,le),i=0|i+v(N,de),s=0|s+v(N,le),r=0|r+v(L,ae),i=0|i+v(L,ue),i=0|i+v(Y,ae),s=0|s+v(Y,ue),r=0|r+v(O,fe),i=0|i+v(O,he),i=0|i+v(I,fe),s=0|s+v(I,he),r=0|r+v(T,me),i=0|i+v(T,ye),i=0|i+v(E,me),s=0|s+v(E,ye);var Ie=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Ie>>>26),Ie&=67108863,r=v(Z,de),i=v(Z,le),i=0|i+v(q,de),s=v(q,le),r=0|r+v(C,ae),i=0|i+v(C,ue),i=0|i+v(N,ae),s=0|s+v(N,ue),r=0|r+v(L,fe),i=0|i+v(L,he),i=0|i+v(Y,fe),s=0|s+v(Y,he),r=0|r+v(O,me),i=0|i+v(O,ye),i=0|i+v(I,me),s=0|s+v(I,ye);var Ue=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Ue>>>26),Ue&=67108863,r=v(Z,ae),i=v(Z,ue),i=0|i+v(q,ae),s=v(q,ue),r=0|r+v(C,fe),i=0|i+v(C,he),i=0|i+v(N,fe),s=0|s+v(N,he),r=0|r+v(L,me),i=0|i+v(L,ye),i=0|i+v(Y,me),s=0|s+v(Y,ye);var Le=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Le>>>26),Le&=67108863,r=v(Z,fe),i=v(Z,he),i=0|i+v(q,fe),s=v(q,he),r=0|r+v(C,me),i=0|i+v(C,ye),i=0|i+v(N,me),s=0|s+v(N,ye);var Ye=0|(0|o+r)+((8191&i)<<13);o=0|(0|s+(i>>>13))+(Ye>>>26),Ye&=67108863,r=v(Z,me),i=v(Z,ye),i=0|i+v(q,me),s=v(q,ye);var je=0|(0|o+r)+((8191&i)<<13);return o=0|(0|s+(i>>>13))+(je>>>26),je&=67108863,p[0]=we,p[1]=be,p[2]=ve,p[3]=_e,p[4]=xe,p[5]=Ae,p[6]=Se,p[7]=Pe,p[8]=Re,p[9]=Be,p[10]=Te,p[11]=Ee,p[12]=ke,p[13]=Oe,p[14]=Ie,p[15]=Ue,p[16]=Le,p[17]=Ye,p[18]=je,0!==o&&(p[19]=o,n.length++),n};v||(T=p),d.prototype.mulTo=function(e,t){var n,o=this.length+e.length;return n=10===this.length&&10===e.length?T(this,e,t):63>o?p(this,e,t):1024>o?a(this,e,t):u(this,e,t),n},g.prototype.makeRBT=function(e){for(var n=Array(e),t=d.prototype._countBits(e)-1,o=0;o<e;o++)n[o]=this.revBin(o,t,e);return n},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var o=0,r=0;r<t;r++)o|=(1&e)<<t-r-1,e>>=1;return o},g.prototype.permute=function(e,t,n,o,r,s){for(var d=0;d<s;d++)o[d]=t[e[d]],r[d]=n[e[d]]},g.prototype.transform=function(e,t,n,o,r,i){var d=Math.sin,a=Math.cos,u=Math.PI;this.permute(i,e,t,n,o,r);for(var g=1;g<r;g<<=1)for(var f=g<<1,l=a(2*u/f),h=d(2*u/f),c=0;c<r;c+=f)for(var m=l,y=h,w=0;w<g;w++){var b=n[c+w],v=o[c+w],_=n[c+w+g],x=o[c+w+g],A=m*_-y*x;x=m*x+y*_,_=A,n[c+w]=b+_,o[c+w]=v+x,n[c+w+g]=b-_,o[c+w+g]=v-x,w!==f&&(A=l*m-h*y,y=l*y+h*m,m=A)}},g.prototype.guessLen13b=function(e,t){var n=1|A(t,e),o=1&n,r=0;for(n=0|n/2;n;n>>>=1)r++;return 1<<r+1+o},g.prototype.conjugate=function(e,n,o){if(!(1>=o))for(var r,s=0;s<o/2;s++)r=e[s],e[s]=e[o-s-1],e[o-s-1]=r,r=n[s],n[s]=-n[o-s-1],n[o-s-1]=-r},g.prototype.normalize13b=function(e,t){for(var n=Math.round,o,r=0,s=0;s<t/2;s++)o=8192*n(e[2*s+1]/t)+n(e[2*s]/t)+r,e[s]=67108863&o,r=67108864>o?0:0|o/67108864;return e},g.prototype.convert13b=function(e,t,o,r){for(var s=0,d=0;d<t;d++)s+=0|e[d],o[2*d]=8191&s,s>>>=13,o[2*d+1]=8191&s,s>>>=13;for(d=2*t;d<r;++d)o[d]=0;n(0===s),n(0==(-8192&s))},g.prototype.stub=function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var o=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(o),s=this.stub(o),d=Array(o),l=Array(o),p=Array(o),a=Array(o),u=Array(o),g=Array(o),f=n.words;f.length=o,this.convert13b(e.words,e.length,d,o),this.convert13b(t.words,t.length,a,o),this.transform(d,s,l,p,o,r),this.transform(a,s,u,g,o,r);for(var h,c=0;c<o;c++)h=l[c]*u[c]-p[c]*g[c],p[c]=l[c]*g[c]+p[c]*u[c],l[c]=h;return this.conjugate(l,p,o),this.transform(l,p,f,s,o,r),this.conjugate(f,s,o),this.normalize13b(f,o),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},d.prototype.mul=function(e){var t=new d(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},d.prototype.mulf=function(e){var t=new d(null);return t.words=Array(this.length+e.length),u(this,e,t)},d.prototype.imul=function(e){return this.clone().mulTo(e,this)},d.prototype.imuln=function(e){n("number"==typeof e),n(67108864>e);for(var t=0,o=0;o<this.length;o++){var r=(0|this.words[o])*e,s=(67108863&r)+(67108863&t);t>>=26,t+=0|r/67108864,t+=s>>>26,this.words[o]=67108863&s}return 0!==t&&(this.words[o]=t,this.length++),this},d.prototype.muln=function(e){return this.clone().imuln(e)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(e){var t=l(e);if(0===t.length)return new d(1);for(var n=this,o=0;o<t.length&&!(0!==t[o]);o++,n=n.sqr());if(++o<t.length)for(var r=n.sqr();o<t.length;o++,r=r.sqr())0!==t[o]&&(n=n.mul(r));return n},d.prototype.iushln=function(e){n("number"==typeof e&&0<=e);var t,o=e%26,r=(e-o)/26;if(0!=o){var s=0;for(t=0;t<this.length;t++){var d=this.words[t]&67108863>>>26-o<<26-o,l=(0|this.words[t])-d<<o;this.words[t]=l|s,s=d>>>26-o}s&&(this.words[t]=s,this.length++)}if(0!==r){for(t=this.length-1;0<=t;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},d.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},d.prototype.iushrn=function(e,t,o){n("number"==typeof e&&0<=e);var d=t?(t-t%26)/26:0;var l=e%26,r=ae((e-l)/26,this.length),s=o;if(d-=r,d=A(0,d),s){for(var p=0;p<r;p++)s.words[p]=this.words[p];s.length=r}if(0===r);else if(this.length>r)for(this.length-=r,p=0;p<this.length;p++)this.words[p]=this.words[p+r];else this.words[0]=0,this.length=1;var a=0;for(p=this.length-1;0<=p&&(0!=a||p>=d);p--){var u=0|this.words[p];this.words[p]=a<<26-l|u>>>l,a=u&(67108863^67108863>>>l<<l)}return s&&0!=a&&(s.words[s.length++]=a),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(e,t,o){return n(0===this.negative),this.iushrn(e,t,o)},d.prototype.shln=function(e){return this.clone().ishln(e)},d.prototype.ushln=function(e){return this.clone().iushln(e)},d.prototype.shrn=function(e){return this.clone().ishrn(e)},d.prototype.ushrn=function(e){return this.clone().iushrn(e)},d.prototype.testn=function(e){n("number"==typeof e&&0<=e);var t=e%26,o=(e-t)/26;if(this.length<=o)return!1;var r=this.words[o];return!!(r&1<<t)},d.prototype.imaskn=function(e){n("number"==typeof e&&0<=e);var t=e%26,o=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=o)return this;if(0!=t&&o++,this.length=ae(o,this.length),0!=t){this.words[this.length-1]&=67108863^67108863>>>t<<t}return this.strip()},d.prototype.maskn=function(e){return this.clone().imaskn(e)},d.prototype.iaddn=function(e){return n("number"==typeof e),n(67108864>e),0>e?this.isubn(-e):0===this.negative?this._iaddn(e):1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this)},d.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t==this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=A(this.length,t+1),this},d.prototype.isubn=function(e){if(n("number"==typeof e),n(67108864>e),0>e)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&0>this.words[t];t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},d.prototype.addn=function(e){return this.clone().iaddn(e)},d.prototype.subn=function(e){return this.clone().isubn(e)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(e,t,o){var r,s=e.length+o;this._expand(s);var d,l=0;for(r=0;r<e.length;r++){d=(0|this.words[r+o])+l;var p=(0|e.words[r])*t;d-=67108863&p,l=(d>>26)-(0|p/67108864),this.words[r+o]=67108863&d}for(;r<this.length-o;r++)d=(0|this.words[r+o])+l,l=d>>26,this.words[r+o]=67108863&d;if(0===l)return this.strip();for(n(-1===l),l=0,r=0;r<this.length;r++)d=-(0|this.words[r])+l,l=d>>26,this.words[r]=67108863&d;return this.negative=1,this.strip()},d.prototype._wordDiv=function(e,t){var n=this.length-e.length,o=this.clone(),r=e,s=0|r.words[r.length-1],l=this._countBits(s);n=26-l,0!=n&&(r=r.ushln(n),o.iushln(n),s=0|r.words[r.length-1]);var p,u=o.length-r.length;if("mod"!==t){p=new d(null),p.length=u+1,p.words=Array(p.length);for(var g=0;g<p.length;g++)p.words[g]=0}var f=o.clone()._ishlnsubmul(r,1,u);0===f.negative&&(o=f,p&&(p.words[u]=1));for(var h,c=u-1;0<=c;c--){for(h=67108864*(0|o.words[r.length+c])+(0|o.words[r.length+c-1]),h=ae(0|h/s,67108863),o._ishlnsubmul(r,h,c);0!==o.negative;)h--,o.negative=0,o._ishlnsubmul(r,1,c),o.isZero()||(o.negative^=1);p&&(p.words[c]=h)}return p&&p.strip(),o.strip(),"div"!==t&&0!=n&&o.iushrn(n),{div:p||null,mod:o}},d.prototype.divmod=function(e,t,o){if(n(!e.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var r,i,s;return 0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(r=s.div.neg()),"div"!==t&&(i=s.mod.neg(),o&&0!==i.negative&&i.iadd(e)),{div:r,mod:i}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(r=s.div.neg()),{div:r,mod:s.mod}):0==(this.negative&e.negative)?e.length>this.length||0>this.cmp(e)?{div:new d(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new d(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new d(this.modn(e.words[0]))}:this._wordDiv(e,t):(s=this.neg().divmod(e.neg(),t),"div"!==t&&(i=s.mod.neg(),o&&0!==i.negative&&i.isub(e)),{div:s.div,mod:i})},d.prototype.div=function(e){return this.divmod(e,"div",!1).div},d.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},d.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},d.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0===t.div.negative?t.mod:t.mod.isub(e),o=e.ushrn(1),r=e.andln(1),i=n.cmp(o);return 0>i||1===r&&0===i?t.div:0===t.div.negative?t.div.iaddn(1):t.div.isubn(1)},d.prototype.modn=function(e){n(67108863>=e);for(var t=0,o=this.length-1;0<=o;o--)t=(67108864%e*t+(0|this.words[o]))%e;return t},d.prototype.idivn=function(e){n(67108863>=e);for(var t,o=0,r=this.length-1;0<=r;r--)t=(0|this.words[r])+67108864*o,this.words[r]=0|t/e,o=t%e;return this.strip()},d.prototype.divn=function(e){return this.clone().idivn(e)},d.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,o=e.clone();t=0===t.negative?t.clone():t.umod(e);for(var r=new d(1),s=new d(0),l=new d(0),p=new d(1),a=0;t.isEven()&&o.isEven();)t.iushrn(1),o.iushrn(1),++a;for(var u=o.clone(),f=t.clone();!t.isZero();){for(var h=0,c=1;0==(t.words[0]&c)&&26>h;++h,c<<=1);if(0<h)for(t.iushrn(h);0<h--;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(f)),r.iushrn(1),s.iushrn(1);for(var m=0,y=1;0==(o.words[0]&y)&&26>m;++m,y<<=1);if(0<m)for(o.iushrn(m);0<m--;)(l.isOdd()||p.isOdd())&&(l.iadd(u),p.isub(f)),l.iushrn(1),p.iushrn(1);0<=t.cmp(o)?(t.isub(o),r.isub(l),s.isub(p)):(o.isub(t),l.isub(r),p.isub(s))}return{a:l,b:p,gcd:o.iushln(a)}},d.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,o=e.clone();t=0===t.negative?t.clone():t.umod(e);for(var r=new d(1),s=new d(0),l=o.clone();0<t.cmpn(1)&&0<o.cmpn(1);){for(var p=0,u=1;0==(t.words[0]&u)&&26>p;++p,u<<=1);if(0<p)for(t.iushrn(p);0<p--;)r.isOdd()&&r.iadd(l),r.iushrn(1);for(var g=0,f=1;0==(o.words[0]&f)&&26>g;++g,f<<=1);if(0<g)for(o.iushrn(g);0<g--;)s.isOdd()&&s.iadd(l),s.iushrn(1);0<=t.cmp(o)?(t.isub(o),r.isub(s)):(o.isub(t),s.isub(r))}var h;return h=0===t.cmpn(1)?r:s,0>h.cmpn(0)&&h.iadd(e),h},d.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var n=this.clone(),o=e.clone();n.negative=0,o.negative=0;for(var i=0;n.isEven()&&o.isEven();i++)n.iushrn(1),o.iushrn(1);do{for(;n.isEven();)n.iushrn(1);for(;o.isEven();)o.iushrn(1);var s=n.cmp(o);if(0>s){var r=n;n=o,o=r}else if(0===s||0===o.cmpn(1))break;n.isub(o)}while(!0);return o.iushln(i)},d.prototype.invm=function(e){return this.egcd(e).a.umod(e)},d.prototype.isEven=function(){return 0==(1&this.words[0])},d.prototype.isOdd=function(){return 1==(1&this.words[0])},d.prototype.andln=function(e){return this.words[0]&e},d.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,o=(e-t)/26,r=1<<t;if(this.length<=o)return this._expand(o+1),this.words[o]|=r,this;for(var s,d=r,l=o;0!==d&&l<this.length;l++)s=0|this.words[l],s+=d,d=s>>>26,s&=67108863,this.words[l]=s;return 0!==d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function(e){var t=0>e;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var o;if(1<this.length)o=1;else{t&&(e=-e),n(67108863>=e,"Number is too big");var r=0|this.words[0];o=r===e?0:r<e?-1:1}return 0===this.negative?o:0|-o},d.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0===this.negative?t:0|-t},d.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;0<=n;n--){var o=0|this.words[n],r=0|e.words[n];if(o!==r){o<r?t=-1:o>r&&(t=1);break}}return t},d.prototype.gtn=function(e){return 1===this.cmpn(e)},d.prototype.gt=function(e){return 1===this.cmp(e)},d.prototype.gten=function(e){return 0<=this.cmpn(e)},d.prototype.gte=function(e){return 0<=this.cmp(e)},d.prototype.ltn=function(e){return-1===this.cmpn(e)},d.prototype.lt=function(e){return-1===this.cmp(e)},d.prototype.lten=function(e){return 0>=this.cmpn(e)},d.prototype.lte=function(e){return 0>=this.cmp(e)},d.prototype.eqn=function(e){return 0===this.cmpn(e)},d.prototype.eq=function(e){return 0===this.cmp(e)},d.red=function(e){return new w(e)},d.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},d.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(e){return this.red=e,this},d.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},d.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},d.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},d.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},d.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},d.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},d.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},d.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},d.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var e=new d(null);return e.words=Array(x(this.n/13)),e},f.prototype.ireduce=function(e){var t,n=e;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength();while(t>this.n);var o=t<this.n?-1:n.ucmp(this.p);return 0===o?(n.words[0]=0,n.length=1):0<o?n.isub(this.p):n.strip(),n},f.prototype.split=function(e,t){e.iushrn(this.n,0,t)},f.prototype.imulK=function(e){return e.imul(this.k)},o(h,f),h.prototype.split=function(e,t){for(var n=4194303,o=ae(e.length,9),r=0;r<o;r++)t.words[r]=e.words[r];if(t.length=o,9>=e.length)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&n,r=10;r<e.length;r++){var d=0|e.words[r];e.words[r-10]=(d&n)<<4|s>>>22,s=d}s>>>=22,e.words[r-10]=s,e.length-=0===s&&10<e.length?10:9},h.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t,n=0,o=0;o<e.length;o++)t=0|e.words[o],n+=977*t,e.words[o]=67108863&n,n=64*t+(0|n/67108864);return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},o(c,f),o(m,f),o(y,f),y.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var o=19*(0|e.words[n])+t,r=67108863&o;o>>>=26,e.words[n]=r,t=o}return 0!==t&&(e.words[e.length++]=t),e},d._prime=function e(t){if(E[t])return E[t];var e;if("k256"===t)e=new h;else if("p224"===t)e=new c;else if("p192"===t)e=new m;else if("p25519"===t)e=new y;else throw new Error("Unknown prime "+t);return E[t]=e,e},w.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return 0<=n.cmp(this.m)&&n.isub(this.m),n._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return 0<=n.cmp(this.m)&&n.isub(this.m),n},w.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return 0>n.cmpn(0)&&n.iadd(this.m),n._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return 0>n.cmpn(0)&&n.iadd(this.m),n},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var o=this.m.andln(3);if(n(1==o%2),3===o){var l=this.m.add(new d(1)).iushrn(2);return this.pow(e,l)}for(var p=this.m.subn(1),a=0;!p.isZero()&&0===p.andln(1);)a++,p.iushrn(1);n(!p.isZero());var u=new d(1).toRed(this),g=u.redNeg(),f=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new d(2*h*h).toRed(this);0!==this.pow(h,f).cmp(g);)h.redIAdd(g);for(var y=this.pow(h,p),w=this.pow(e,p.addn(1).iushrn(1)),v=this.pow(e,p),_=a;0!==v.cmp(u);){for(var x=v,A=0;0!==x.cmp(u);A++)x=x.redSqr();n(A<_);var S=this.pow(y,new d(1).iushln(_-A-1));w=w.redMul(S),y=S.redSqr(),v=v.redMul(y),_=A}return w},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0===t.negative?this.imod(t):(t.negative=0,this.imod(t).redNeg())},w.prototype.pow=function(e,t){if(t.isZero())return new d(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=Array(16);n[0]=new d(1).toRed(this),n[1]=e;for(var o=2;o<n.length;o++)n[o]=this.mul(n[o-1],e);var r=n[0],s=0,l=0,p=t.bitLength()%26;for(0===p&&(p=26),o=t.length-1;0<=o;o--){for(var a,u=t.words[o],g=p-1;0<=g;g--){if(a=1&u>>g,r!==n[0]&&(r=this.sqr(r)),0===a&&0===s){l=0;continue}s<<=1,s|=a,l++,4!==l&&(0!=o||0!=g)||(r=this.mul(r,n[s]),l=0,s=0)}p=26}return r},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},d.mont=function(e){return new b(e)},o(b,w),b.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},b.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},b.prototype.imul=function(e,n){if(e.isZero()||n.isZero())return e.words[0]=0,e.length=1,e;var o=e.imul(n),t=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=o.isub(t).iushrn(this.shift),i=r;return 0<=r.cmp(this.m)?i=r.isub(this.m):0>r.cmpn(0)&&(i=r.iadd(this.m)),i._forceRed(this)},b.prototype.mul=function(e,n){if(e.isZero()||n.isZero())return new d(0)._forceRed(this);var o=e.mul(n),t=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=o.isub(t).iushrn(this.shift),i=r;return 0<=r.cmp(this.m)?i=r.isub(this.m):0>r.cmpn(0)&&(i=r.iadd(this.m)),i._forceRed(this)},b.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}})(e,fe)}),i=function(e,t){for(var n=e;n.length<2*t;)n="0".concat(n);return n},Pe=function(e){return e=e.toUpperCase(),e=e.substr(4)+e.substr(0,4),e.split("").map(function(e){var t=e.charCodeAt(0);return 65<=t&&t<=90?t-65+10:e}).join("")},Re=function(e){for(var t,n=e;2<n.length;)t=n.slice(0,9),n=parseInt(t,10)%97+n.slice(t.length);return parseInt(n,10)%97},Be=function(){function e(t){n(this,e),this._iban=t}return r(e,[{key:"isValid",value:function(){return /^XE\d{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(this._iban)&&1===Re(Pe(this._iban))}},{key:"isDirect",value:function(){return 34===this._iban.length||35===this._iban.length}},{key:"isIndirect",value:function(){return 20===this._iban.length}},{key:"checksum",value:function(){return this._iban.substr(2,2)}},{key:"institution",value:function(){return this.isIndirect()?this._iban.substr(7,4):""}},{key:"client",value:function(){return this.isIndirect()?this._iban.substr(11):""}},{key:"toAddress",value:function(){if(this.isDirect()){var e=this._iban.substr(4),t=new Se(e,36);return(void 0)(t.toString(16,20))}return""}},{key:"toString",value:function(){return this._iban}}],[{key:"toAddress",value:function(t){if(t=new e(t),!t.isDirect())throw new Error("IBAN is indirect and can't be converted");return t.toAddress()}},{key:"toIban",value:function(t){return e.fromAddress(t).toString()}},{key:"fromAddress",value:function(t){if(!(void 0)(t))throw new Error("Provided address is not a valid address: ".concat(t));t=t.replace("0x","").replace("0X","");var n=new Se(t,16),o=n.toString(36),r=i(o,15);return e.fromBban(r.toUpperCase())}},{key:"fromBban",value:function(t){var n=Re(Pe("".concat("XE","00").concat(t))),o="0".concat(98-n).slice(-2);return new e("XE"+o+t)}},{key:"createIndirect",value:function(t){return e.fromBban("ETH".concat(t.institution).concat(t.identifier))}},{key:"isValid",value:function(t){var n=new e(t);return n.isValid()}}]),e}();e.Iban=Be,Object.defineProperty(e,"__esModule",{value:!0})});
